# 门诊电子病历协议

## 基本信息

端口号：8009
RedisDB：3

## 门诊处方

### 门诊药品医嘱药品列表获取

```http
[GET]/outemr/drug_order/drug/list
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### 请求报文参数

| 参数名  | 类型     | 必填   | 说明   |
| ---- | ------ | ---- | ---- |
| key  | String | 否    | 药品名称 |

#### 回复报文参数(ObjectList)

| 参数名                 | 类型      | 必填   | 说明                    |
| ------------------- | ------- | ---- | --------------------- |
| drug_name           | String  | 是    | 药品名称                  |
| drug_pack_id        | Long    | 是    | 药品包装规格ID              |
| drug_split          | Integer | 是    | 拆分标志;1:不拆分; 2:拆分      |
| drug_spec           | String  | 是    | 药品规格(如：0.25g)         |
| drug_factory        | String  | 是    | 生产厂家                  |
| drug_pack_spec      | String  | 是    | 药品处方规格(如：0.25g*8片/盒)  |
| drug_pack_units     | String  | 是    | 药品处方单位(如：盒)           |
| drug_price          | Double  | 是    | 药品处方单价(如：20.00)       |
| drug_stock_num      | String  | 是    | 药品处方处方库存,总库存(如：20盒6片) |
| drug_dosage         | Double  | 是    | 默认一次使用剂量              |
| drug_usage_units    | String  | 是    | 默认一次使用剂量单位            |
| drug_freq_id        | Long    | 是    | 默认执行频率ID              |
| drug_freq_describe  | String  | 是    | 默认执行频率描述              |
| drug_days           | Integer | 否    | 执行天数                  |
| drug_administration | String  | 是    | 默认用量用法-给药途径           |
| drug_usag_place     | String  | 是    | 默认用量用法-给药部位           |


### 门诊药品医嘱处方新增修改协议

```http
[POST]/outemr/drug_order/save_update/{pres_id}
```

说明：
1. 已提交的处方不允许修改。
2. 保存的处方不进行医嘱正文拼接与保存。

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

病历信息操作表(emr_data_record)
医嘱主表(emr_order)
药品医嘱明细表(emr_orde_drug)
医嘱处方主表(emr_orde_prescription)

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### PathVariable

| 参数名     | 类型   | 必填   | 说明                |
| ------- | ---- | ---- | ----------------- |
| pres_id | Long | 否    | 处方id,没有时为新建，有时为更新 |

#### RequestBody

| 参数名         | 类型         | 必填   | 说明        |
| ----------- | ---------- | ---- | --------- |
| trea_id     | String     | 是    | 就诊ID      |
| total_price | Double     | 是    | 医嘱列表药品总价格 |
| orders      | ObjectList | 是    | 医嘱列表信息    |

##### 医嘱列表信息

| 参数名                 | 类型      | 长度   | 必填   | 说明                           |
| ------------------- | ------- | ---- | ---- | ---------------------------- |
| drug_pack_id        | Long    |      | 是    | 药品包装规格ID                     |
| drug_split          | Integer |      | 是    | 拆分标志;1:不拆分; 2:拆分             |
| drug_dosage         | Double  |      | 是    | 一次使用剂量                       |
| drug_usage_units    | String  |      | 是    | 一次使用单位                       |
| drug_administration | String  |      | 是    | 给药途径 1-口服;2-注射;3-外用;         |
| drug_usag_place     | String  |      | 是    | 给药部位 0:无给药部位1-左眼;2-右眼; 3-双眼; |
| drug_freq_id        | Long    |      | 是    | 执行频率ID                       |
| drug_days           | Integer |      | 是    | 执行天数                         |
| drug_total_amount   | Double  |      | 是    | 发药数量                         |
| drug_memo           | String  | 128  | 否    | 备注                           |

#### 回复报文参数

| 参数名      | 类型       | 必填   | 说明     |
| -------- | -------- | ---- | ------ |
| pres_id  | Long     | 是    | 处方id   |
| pres_no  | String   | 是    | 处方号    |
| orde_ids | LongList | 是    | 医嘱ID列表 |

### 门诊药品医嘱处方提交协议

```http
[POST]/outemr/drug_order/submit/{pres_id}
```

说明：
1. 只有未提交的处方才可以提交。
2. 提交处方时，把各个已提交处方医嘱正文拼接成处方正文放入病历信息操作表中（生成新的病历信息操作表记录）。
3. 提交处方时，根据处方生成收费单（调用公共服务模块接口规范中的协议）。
4. 提交处方时，根据医嘱数量进行库存的锁库操作（调用公共服务模块接口规范中的协议）。

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

病历信息操作表(emr_data_record)
病历信息表(emr_treatment)
医嘱处方主表(emr_orde_prescription)
租户收费订单表(com_tena_trade)
户收费订单子表(com_tena_tradeitem)
药房库存表(drug_stock)
药品库存表(drug_stock_all)

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### PathVariable

| 参数名     | 类型   | 必填   | 说明   |
| ------- | ---- | ---- | ---- |
| pres_id | Long | 是    | 处方id |


#### RequestBody

| 参数名         | 类型         | 必填   | 说明        |
| ----------- | ---------- | ---- | --------- |
| trea_id     | String     | 是    | 就诊ID      |
| total_price | Double     | 是    | 医嘱列表药品总价格 |
| orders      | ObjectList | 是    | 医嘱列表信息    |

##### 医嘱列表信息

| 参数名                 | 类型      | 长度   | 必填   | 说明               |
| ------------------- | ------- | ---- | ---- | ---------------- |
| drug_pack_id        | Long    |      | 是    | 药品包装规格ID         |
| drug_split          | Integer |      | 是    | 拆分标志;1:不拆分; 2:拆分 |
| drug_dosage         | Double  |      | 是    | 一次使用剂量           |
| drug_usage_units    | String  |      | 是    | 一次使用单位           |
| drug_administration | String  |      | 是    | 给药途径             |
| drug_usag_place     | String  |      | 是    | 给药部位             |
| drug_freq_id        | Long    |      | 是    | 执行频率ID           |
| drug_days           | Integer |      | 是    | 执行天数             |
| drug_total_amount   | Double  |      | 是    | 发药数量             |
| drug_memo           | String  | 128  | 否    | 备注               |

#### 回复报文参数

| 参数名      | 类型       | 必填   | 说明     |
| -------- | -------- | ---- | ------ |
| pres_id  | Long     | 是    | 处方id   |
| pres_no  | String   | 是    | 处方号    |
| orde_ids | LongList | 是    | 医嘱ID列表 |



### 门诊药品历史就诊处方详情获取

```http
[GET]/outemr/drug_order/prescription/list
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 请求报文参数

| 参数名       | 类型      | 必填   | 说明                 |
| --------- | ------- | ---- | ------------------ |
| trea_id   | String  | 是    | 就诊ID               |
| type      | Integer | 是    | 类型(1：病历；2：医嘱；3：验光) |
| page_size | Integer | 否    | 每页条数 空表示10条        |
| page_num  | Integer | 否    | 第几页 空表示第1页         |

#### 回复报文参数

| 参数名        | 类型         | 必填   | 说明     |
| ---------- | ---------- | ---- | ------ |
| page_num   | Integer    | 是    | 当前页    |
| page_size  | Integer    | 是    | 每页的数量  |
| pages      | Integer    | 是    | 总页数    |
| visit_list | ObjectList | 否    | 就诊列表信息 |

##### 就诊列表信息

| 参数名                 | 类型         | 必填   | 说明     |
| ------------------- | ---------- | ---- | ------ |
| trea_id             | String     | 是    | 就诊号    |
| trea_visi_time      | String     | 否    | 就诊日期   |
| depa_name           | String     | 否    | 就诊科室   |
| diag_name           | String     | 否    | 诊断名称   |
| trea_visi_user_name | String     | 否    | 接诊医生   |
| pres_list           | ObjectList | 否    | 处方列表信息 |

##### 处方列表信息

| 参数名                | 类型         | 必填   | 说明                                       |
| ------------------ | ---------- | ---- | ---------------------------------------- |
| pres_id            | Long       | 是    | 处方id                                     |
| pres_create_time   | String     | 是    | 处方创建时间                                   |
| pres_enable_quote  | Integer    | 是    | 处方能否引用(0:否 ；1：能)                         |
| pres_enable_refund | Integer    | 是    | 处方能否申请退药(0:否 ；1：能)                       |
| pres_source        | Integer    | 是    | 处方来源(0:未知;1:线上系统;2:线下院内系统;)              |
| pres_state         | Integer    | 是    | 处方状态 (0:未知;1:待收费;2:待发药;3:已发药;4:待退药;5:待退费;6:已退费';7:已退药;8:已失效) [0:未知;表示线下同步的数据状态，只做展示不参与线上业务 ] |
| pres_charge_state  | Integer    | 否    | 处方收费状态 ((0:历史或线下数据;1:未收费;2:已收费;3:已撤销(未收费撤销);4:未退费;5:已退费;6:超时失效') |
| pres_dispense      | Integer    | 否    | 发药状态 (0:历史或线下数据;1:未发药;2:已发药;3:未退药;4:已退药) |
| pres_doctor_id     | Integer    | 是    | 开方医生，医生账号ID                              |
| pres_doctor_name   | String     | 是    | 开方医生名称                                   |
| pres_text          | String     | 是    | 处方正文,各医嘱拼接而成                             |
| orders             | ObjectList | 是    | 医嘱列表信息                                   |

##### 医嘱列表信息

| 参数名                 | 类型      | 必填   | 说明                 |
| ------------------- | ------- | ---- | ------------------ |
| drug_pack_id        | Long    | 是    | 药品包装规格ID           |
| drug_spec           | String  | 是    | 药品规格(如：0.25g)      |
| drug_name           | String  | 是    | 药品名称               |
| drug_dosage         | Double  | 是    | 一次使用剂量             |
| drug_usage_units    | String  | 否    | 一次使用单位             |
| drug_administration | String  | 是    | 给药途径               |
| drug_usag_place     | String  | 是    | 给药部位               |
| drug_freq_id        | Long    | 否    | 默认执行频率ID           |
| drug_freq_describe  | String  | 是    | 默认执行频率描述           |
| drug_total_amount   | Double  | 是    | 包装数量总量             |
| drug_pack_spec      | String  | 是    | 包装规格，如： 0.25g*8片/盒 |
| drug_pack_units     | String  | 是    | 包装单位               |
| drug_split          | Integer | 是    | 拆分标志               |
| drug_days           | Integer | 是    | 执行天数               |
| drug_price          | Double  | 是    | 售价 单价,单位元          |
| drug_charge         | Double  | 是    | 实付费用,单位元           |
| drug_memo           | String  | 否    | 备注                 |


### 门诊药品处方信息获取

```http
[GET]/outemr/drug_order/prescription/info/{trea_id}
```
说明 ：返回未提交状态下的医嘱信息

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 请求报文参数

#### PathVariable

| 参数名     | 类型   | 必填   | 说明   |
| ------- | ---- | ---- | ---- |
| trea_id | Long | 是    | 患者id |

#### 回复报文参数(Object)

| 参数名     | 类型         | 必填   | 说明     |
| ------- | ---------- | ---- | ------ |
| pres_id | Long       | 是    | 处方id   |
| orders  | ObjectList | 是    | 医嘱列表信息 |

##### 医嘱列表信息(ObjectList)

##### 医嘱列表信息

| 参数名                 | 类型      | 必填   | 说明                 |
| ------------------- | ------- | ---- | ------------------ |
| drug_pack_id        | Long    | 是    | 药品包装规格ID           |
| drug_spec           | String  | 是    | 药品规格(如：0.25g)      |
| drug_name           | String  | 是    | 药品名称               |
| drug_dosage         | Double  | 是    | 一次使用剂量             |
| drug_usage_units    | String  | 否    | 一次使用单位             |
| drug_administration | String  | 是    | 给药途径               |
| drug_usag_place     | String  | 是    | 给药部位               |
| drug_freq_id        | Long    | 否    | 默认执行频率ID           |
| drug_freq_describe  | String  | 是    | 默认执行频率描述           |
| drug_total_amount   | Double  | 是    | 包装数量总量             |
| drug_pack_spec      | String  | 是    | 包装规格，如： 0.25g*8片/盒 |
| drug_pack_units     | String  | 是    | 包装单位               |
| drug_split          | Integer | 是    | 拆分标志               |
| drug_days           | Integer | 是    | 执行天数               |
| drug_price          | Double  | 是    | 售价 单价,单位元          |
| drug_charge         | Double  | 是    | 实付费用,单位元           |
| drug_memo           | String  | 否    | 备注                 |


### 门诊药品医嘱处方申请退药协议

```http
[POST]/outemr/drug_order/refund/{pres_id}
```

说明：
1. 只有已提交的处方才可以退费，已经退费的处方不允许再次退费。
2. 未收费的处方，可直接退药（调用公共服务模块接口规范中的协议，进行解锁操作）
3. 已收费、未发药的处方，标志处方为待退费（调用公共服务模块接口规范中的协议，生成退费单，进行解锁操作）
4. 已收费、已发药的处方，标志处方为待退费（调用公共服务模块接口规范中的协议，生成退费单），待退药，不解锁。
5. 重新拼接处方正文，存入病历信息表

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

病历信息操作表(emr_data_record)
病历信息表(emr_treatment)
医嘱处方主表(emr_orde_prescription)
租户收费订单表(com_tena_trade)
药房库存表(drug_stock)
药品库存表(drug_stock_all)

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### PathVariable

| 参数名     | 类型   | 必填   | 说明   |
| ------- | ---- | ---- | ---- |
| pres_id | Long | 是    | 处方id |

#### 回复报文参数

| 参数名               | 类型      | 必填   | 说明                                       |
| ----------------- | ------- | ---- | ---------------------------------------- |
| pres_id           | Long    | 是    | 处方ID                                     |
| pres_state        | Integer | 是    | 处方状态 (0:未知;1:待收费;2:待发药;3:已发药;4:待退药;5:待退费;6:已退费';7:已退药;8:已失效) [0:未知;表示线下同步的数据状态，只做展示不参与线上业务 ] |
| pres_charge_state | Integer | 是    | 处方收费状态;0:历史或线下数据;1:未收费;2:已收费;3:未退费;4:已退费;5:超时失效;6:已撤销(未收费撤销); |
| pres_dispense     | Integer | 是    | 处方发药状态;1:未发药;2:已发药;3:未退药;4:已退药           |
| trad_id           | Long    | 否    | 退费订单ID                                   |


## 医嘱套餐

### 门诊药品医嘱处方存为医嘱套餐

```http
[POST]/outemr/drug_order/package/{pack_id}
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

说明

1、pack_id 为空时，为医嘱套餐新增，否则为修改


#### 影响的表

医嘱套餐表(adm_order_package)
医嘱套餐明细表(adm_order_packitme)
医嘱套餐药品明细表(adm_order_packdrug)

#### 请求报文参数

#### PathVariable

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| pack_id | Long | 否    | 医嘱套餐ID |

#### RequestBody

| 参数名           | 类型         | 长度   | 必填   | 说明              |
| ------------- | ---------- | ---- | ---- | --------------- |
| pack_name     | String     | 16   | 是    | 医嘱套餐名称          |
| pack_personal | Integer    |      | 是    | 个人标志 0-非个人,1-个人 |
| orders        | ObjectList |      | 是    | 医嘱列表信息          |

##### 医嘱列表信息

| 参数名                 | 类型      | 长度   | 必填   | 说明                   |
| ------------------- | ------- | ---- | ---- | -------------------- |
| drug_orde_id        | Long    |      | 否    | 医嘱明细ID(新增为空,修改必填  )  |
| drug_pack_id        | Long    |      | 是    | 药品包装规格ID             |
| drug_name           | String  |      | 是    | 药品名称                 |
| drug_spec           | String  |      | 是    | 药品规格(如：0.25g)        |
| drug_price          | Double  |      | 是    | 药品处方单价(如：20.00)      |
| drug_days           | Integer |      | 否    | 执行天数                 |
| drug_split          | Integer |      | 是    | 拆分标志;1:不拆分; 2:拆分     |
| drug_pack_spec      | String  |      | 是    | 药品处方规格(如：0.25g*8片/盒) |
| drug_pack_units     | String  |      | 是    | 药品处方单位(如：盒)          |
| drug_dosage         | Double  |      | 是    | 默认一次使用剂量             |
| drug_usage_units    | String  |      | 是    | 默认一次使用剂量单位           |
| drug_administration | String  |      | 是    | 默认用量用法-给药途径          |
| drug_usag_place     | String  |      | 是    | 默认用量用法-给药部位          |
| drug_freq_id        | Long    |      | 是    | 默认执行频率ID             |
| drug_freq_describe  | String  |      | 是    | 默认执行频率描述             |
| drug_total_amount   | Double  |      | 否    | 发药数量                 |
| drug_memo           | String  |      | 否    | 备注                   |


#### 回复报文参数

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| pack_id | Long | 是    | 医嘱套餐ID |


### 门诊药品医嘱套餐详情获取

```http
[GET]/outemr/drug_order/package/{pack_id}
```

说明：

1、pack_id (医嘱套餐ID) 为空时 ， 即获取所有医嘱套餐的列表 ，否则获取单个医嘱套餐详情
2、key在pack_id (医嘱套餐ID) 为空时，根据关键字模糊匹配套餐名称，返回医嘱套餐信息
3、返回数据根据医嘱套餐ID是否为空，区分处理

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### PathVariable

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| pack_id | Long | 否    | 医嘱套餐ID |

#### 请求报文参数

| 参数名  | 类型     | 必选   | 说明   |
| ---- | ------ | ---- | ---- |
| key  | String | 否    | 套餐名称 |

#### 回复报文参数 (医嘱套餐ID为空 , Objectlist)

| 参数名           | 类型      | 必填   | 说明              |
| ------------- | ------- | ---- | --------------- |
| pack_id       | String  | 是    | 医嘱套餐ID          |
| pack_name     | String  | 是    | 医嘱套餐名称          |
| pack_personal | Integer | 是    | 个人标志 0-非个人,1-个人 |

#### 回复报文参数 (医嘱套餐ID不为空)

| 参数名           | 类型         | 必填   | 说明              |
| ------------- | ---------- | ---- | --------------- |
| pack_id       | String     | 是    | 套餐ID            |
| pack_name     | String     | 是    | 套餐名称            |
| pack_personal | Integer    | 是    | 个人标志 0-非个人,1-个人 |
| orders        | ObjectList | 否    | 医嘱列表            |

医嘱列表说明

| 参数名                 | 类型      | 长度   | 必填   | 说明                   |
| ------------------- | ------- | ---- | ---- | -------------------- |
| drug_orde_id        | Long    |      | 否    | 医嘱明细ID(新增为空,修改必填  )  |
| drug_pack_id        | Long    |      | 是    | 药品包装规格ID             |
| drug_name           | String  |      | 是    | 药品名称                 |
| drug_spec           | String  |      | 是    | 药品规格(如：0.25g)        |
| drug_price          | Double  |      | 是    | 药品处方单价(如：20.00)      |
| drug_days           | Integer |      | 否    | 执行天数                 |
| drug_split          | Integer |      | 是    | 拆分标志;1:不拆分; 2:拆分     |
| drug_pack_spec      | String  |      | 是    | 药品处方规格(如：0.25g*8片/盒) |
| drug_pack_units     | String  |      | 是    | 药品处方单位(如：盒)          |
| drug_dosage         | Double  |      | 是    | 默认一次使用剂量             |
| drug_usage_units    | String  |      | 是    | 默认一次使用剂量单位           |
| drug_administration | String  |      | 是    | 默认用量用法-给药途径          |
| drug_usag_place     | String  |      | 是    | 默认用量用法-给药部位          |
| drug_freq_id        | Long    |      | 是    | 默认执行频率ID             |
| drug_freq_describe  | String  |      | 是    | 默认执行频率描述             |
| drug_total_amount   | Double  |      | 否    | 发药数量                 |
| drug_memo           | String  |      | 否    | 备注                   |


### 门诊药品医嘱套餐删除 

```http
[DELETE]/outemr/drug_order/package/delete/{pack_id}
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 请求报文参数

#### PathVariable

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| pack_id | Long | 否    | 医嘱套餐ID |

#### 回复报文参数

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| pack_id | Long | 是    | 医嘱套餐ID |


## 标准诊断

### 标准诊断新增修改协议

```url
[POST]/outemr/standard/diagnose/{diag_id}
```

说明：
1. 诊断ICD编码加附加码在库内不允许重复（除被禁用及删除的诊断外）。
2. 诊断名称与别名在库内不允许重复（除被禁用及删除的诊断外）。

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

诊断信息表(adm_diagnose)
诊断别名表(adm_diag_alias)
线下诊断库关联表(api_diag_related)

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_USERID_KEY | Long | 是    | userId，当前请求操作的用户   |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### PathVariable

| 参数名     | 类型   | 必填   | 说明                  |
| ------- | ---- | ---- | ------------------- |
| diag_id | Long | 否    | 标准诊断ID,没有时为新建，有时为更新 |

#### RequestBody

| 参数名              | 类型         | 长度   | 必填   | 说明                                       |
| ---------------- | ---------- | ---- | ---- | ---------------------------------------- |
| diag_icd         | String     | 12   | 是    | 诊断ICD编码，剑形编码，病因                          |
| diag_attach      | String     | 12   | 否    | 附加码，星形编码，临床表现                            |
| diag_name        | String     | 128  | 是    | 诊断名称                                     |
| diag_alias       | StringList |      | 否    | 别名列表                                     |
| diag_hospital_id | String     | 32   | 否    | 线下诊断ID,纯兼容温州眼视光                          |
| diag_enable      | Integer    |      | 是    | 是否启用标志；0：停用；1：有效                         |
| diag_ophthal     | Integer    |      | 否    | 眼科诊断类型(默认 1)；0-不是眼科诊断；1-是普通眼科诊断；2-双眼视功能的眼科诊断 |

#### 回复报文参数

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| diag_id | Long | 否    | 标准诊断ID |

### 标准诊断禁用启用协议

```url
[POST]/outemr/standard/diagnose/{diag_id}/enable
```

说明：
1. 当启用一直诊断时，要进行ICE码，诊断名，别名这三项与其它诊断是否有重复的判断，如果有重复就不允许启用。

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

诊断信息表(adm_diagnose)
诊断别名表(adm_diag_alias)

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_USERID_KEY | Long | 是    | userId，当前请求操作的用户   |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### PathVariable

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| diag_id | Long | 否    | 标准诊断ID |

#### RequestBody

| 参数名         | 类型      | 必填   | 说明             |
| ----------- | ------- | ---- | -------------- |
| diag_enable | Integer | 是    | 是否有效；0：停用；1：有效 |

#### 回复报文参数

| 参数名     | 类型   | 必填   | 说明     |
| ------- | ---- | ---- | ------ |
| diag_id | Long | 否    | 标准诊断ID |


## 门诊处方ForApi


### 门诊药品医嘱处方For_OPENAPI保存协议V1.0

```http
[POST]/outemr/drug_order/openapi/V1.0/save
```

说明：
1. 本协议同时保存处方与医嘱，且不考虑一个处方有多少个医嘱的问题。
2. 医嘱正文要自己拼接了，且是把数据都取出来的拼接
3. 此协议以处方为单位，全量更新
4. 线下同步的处方直接追加到患者所开的处方中，只新增不替换
5. 页面只做展示，不允许引用

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

病历信息操作表(emr_data_record)
病历信息表(emr_treatment)
医嘱主表(emr_order)
药品医嘱明细表(emr_orde_drug)
医嘱处方主表(emr_orde_prescription)


#### 请求报文参数

| 参数名          | 类型         | 必选   | 说明            |
| ------------ | ---------- | ---- | ------------- |
| treat_id     | Long       | 是    | 就诊Id          |
| tenant_id    | Long       | 是    | 租户ID          |
| visi_id      | Long       | 是    | 门诊ID          |
| pati_id      | Long       | 是    | 患者ID          |
| pres_depa_id | Long       | 是    | 线上开方科室        |
| pres_doctor  | Long       | 是    | 线上开方医生        |
| pres_time    | Long       | 是    | 开方时间，unixtime |
| pres_list    | ObjectList | 是    | 处方列表          |

##### 处方列表信息

| 参数名               | 类型         | 必填   | 说明                                       |
| ----------------- | ---------- | ---- | ---------------------------------------- |
| online_pres_id    | String     | 否    | 线上处方id                                   |
| underline_pres_id | String     | 是    | 线下处方ID                                   |
| pres_text         | String     | 否    | 处方正文,各医嘱拼接而成                             |
| pres_type         | Integer    | 是    | 处方来源，1：门诊处方 2：出院带病处方                     |
| pres_costs        | Integer    | 是    | 费用,单位分                                   |
| pres_charges      | Integer    | 是    | 实付费用,单位分                                 |
| pres_charge_state | Integer    | 是    | 处方收费状态 （1:未收费;2:已收费;3:已撤销(未收费撤销);4:未退费;5:已退费;6:超时失效） |
| pres_dispense     | Integer    | 是    | 发药状态 （1:未发药;2:已发药;3:未退药;4:已退药）           |
| orders            | ObjectList | 是    | 医嘱列表                                     |

###### 医嘱列表

| 参数名                 | 长度   | 类型      | 必填   | 说明               |
| ------------------- | ---- | ------- | ---- | ---------------- |
| online_order_id     | 32   | String  | 否    | 线上医嘱id           |
| underline_order_id  | 32   | String  | 否    | 线下医嘱id           |
| drug_name           | 64   | String  | 是    | 药品名称             |
| drug_spec           | 32   | String  | 是    | 药品规格             |
| drug_pack_spec      | 32   | String  | 否    | 包装规格或拆分规格        |
| drug_pack_units     | 8    | String  | 否    | 包装单位或拆分单位        |
| drug_freq_describe  | 40   | String  | 是    | 频率基本描述，3/日       |
| drug_days           |      | Integer | 是    | 执行天数             |
| drug_dosage         |      | Double  | 是    | 一次使用剂量           |
| drug_usage_units    | 8    | String  | 是    | 一次使用单位           |
| drug_administration | 20   | String  | 是    | 给药途径             |
| drug_usag_place     | 20   | String  | 是    | 给药部位             |
| drug_total_amount   |      | Integer | 是    | 药品数量，发药时使用，发了多少药 |
| drug_price          |      | Integer | 是    | 单价，单位分           |
| drug_costs          |      | Integer | 是    | 费用，单位分           |
| drug_charge         |      | Integer | 是    | 实付费用，单位分         |
| drug_memo           | 128  | String  | 否    | 备注               |

#### 回复报表

| 参数名     | 类型       | 必填   | 说明      |
| ------- | -------- | ---- | ------- |
| pres_id | LongList | 是    | 线上处方i列表 |

### 门诊药品医嘱处方For_OPENAPI删除协议V1.0

```http
[DELETE]/outemr/drug_order/openapi
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 影响的表

病历信息操作表(emr_data_record)
病历信息表(emr_treatment)
医嘱主表(emr_order)
药品医嘱明细表(emr_orde_drug)
药品处方主表(emr_orde_prescription)
线下医嘱关联表(api_order_related)
线下医嘱处方关联表(api_pres_related)

#### 请求报文参数

| 参数名       | 类型       | 必选   | 说明   |
| --------- | -------- | ---- | ---- |
| treat_id  | long     | 是    | 就诊Id |
| tenant_id | long     | 是    | 租户ID |
| pres_id   | LongList | 是    | 处方列表 |

#### 回复报文参数

| 参数名          | 类型      | 必填   | 说明               |
| ------------ | ------- | ---- | ---------------- |
| return_state | Integer | 是    | 0:删除失败  1:0:删除成功 |
| return_msg   | String  | 是    | 返回信息             |

### 专科检查-基础检查预检眼压数据同步For_OPENAPI（线下同步线上）

```http
[POST]/outemr/specialist_check/basic_inspection/eyes_pressure/openapi
```

#### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.1.1 | 新增   |

#### 影响的表

眼压眼轴数据表(emr_iop_data)
病历信息操作表(emr_data_record)

#### 请求报文参数

| 参数名             | 类型     | 必选   | 说明        |
| --------------- | ------ | ---- | --------- |
| tena_id         | Long   | 是    | 租户Id      |
| trea_id         | Long   | 是    | 就诊Id      |
| pati_id         | Long   | 是    | 患者ID      |
| visi_id         | Long   | 是    | 门诊ID      |
| operator_depart | Long   | 是    | 操作部门ID    |
| operator_id     | Long   | 是    | 操作人ID     |
| data_time       | Long   | 否    | 检查时间      |
| data_od_iop     | String | 否    | OD-眼压mmgh |
| data_os_iop     | String | 否    | OS-眼压mmgh |
| data_od_axis    | String | 否    | OD-眼轴mm   |
| data_os_axis    | String | 否    | OS-眼轴mm   |
| rela_hos_iop    | String | 否    | 线下眼压ID    |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |

### 专科检查-基础检查预检眼压数据删除

```
[POST]/outemr/specialist_check/basic_inspection/eyes_pressure/delectOpenapi
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.7 | 新增   |

#### 影响的表

眼压眼轴数据表(emr_iop_data)
病历信息操作表(emr_data_record)

#### 请求报文参数

| 参数名          | 类型     | 必选   | 说明     |
| ------------ | ------ | ---- | ------ |
| rela_hos_iop | String | 是    | 线下眼压Id |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |

## 专科检查

### 专科检查-基础检查保存协议

```http
[POST]/outemr/speciality_check/baselineexam/save
```

说明：
1. 保存后要求拼接出新的专科检查正文，如果和原来《病历信息表》中的专科检查正文不同，那么新生成一条病历信息表的数据，并把这条病历信息表的数据做为本次变更的内容。
2. 原镜数据与视力数据在预检中有做，那么这儿第一次打开时显示为预检中的数据，但保存时为自己独立的数据。

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### 影响的表

病历信息操作表(emr_data_record)
基础检查通用数据表(emr_baseline_exam)
原镜度数数据表(emr_original_glasses)
视力数据表(emr_vision_data)
专科检查信息表(emr_specialist)
专科检查信息项表(emr_spec_item)
眼压眼轴数据表(emr_iop_data)
眼球震颤数据表(emr_nystagmus_data)                                                |

#### 请求报文参数

|          参数名          	|   类型  	| 长度 	| 必填 	|                           说明                          	|  变更         	|
|--------------------------	|---------	|------	|------	|---------------------------------------------------------	|-------------	|
| trea_id       			| String 	|		| 是   	| 就诊ID           											|				|
| ----基础检查通用数据（baselineexam）--  	|  |	|    	|  															|				|
| base_ht_otrho         	| Integer 	|		| 否   	| 角膜映光点-otrho; 0-未选中;1-选中                         	|				|
| base_ht_horizontal    	| String  	|		| 否   	| 角膜映光点-水平，otrho否时有效                              	|				|
| base_ht_vertical_type 	| String  	|		| 否   	| 角膜映光点-垂直方向，otrho否时有效；1-R/L；2-L/R              	|				|
| base_ht_vertical      	| String  	|		| 否   	| 角膜映光点-垂直                                             |				|
| base_ht_rem           	| String  	|   50 	| 否   	| 角膜映光点-备注                                             | WEBV1.2.3.2 	|
| base_npc_ttn          	| Integer 	|		| 否   	| 集合近点-TTN;to the nose;0:未选中（破裂点、恢复点可编辑）；1:选中;|				|
| base_npc_break        	| String  	|		| 否   	| 集合近点-破裂点                                             |				|
| base_npc_restore      	| String  	|		| 否   	| 集合近点-恢复点                                             |				|
| base_amp_type         	| String  	|		| 否   	| 调节幅度-方法,1-移近法; 2-负镜片法;3-移近/移远法             	|				|
| base_amp_od_cm        	| String  	|		| 否   	| 调节幅度-OD                                               	|				|
| base_amp_od           	| String  	|		| 否   	| 调节幅度-OD                                               	|				|
| base_amp_os_cm        	| String  	|		| 否   	| 调节幅度-OS                                              	|				|
| base_amp_os           	| String  	|		| 否   	| 调节幅度-OS                                               	|				|
| base_amp_ou_cm        	| String  	|		| 否   	| 调节幅度-OU                                              	|				|
| base_amp_ou           	| String  	|		| 否   	| 调节幅度-OU                                             	|				|
| --其它模板数据（template_data)--- |  	|    	|      	|															|				|
| 瞳孔对光反射                |         	|		|      	|                                                        	|				|
| pupil_light_reflection_status | Integer|		| 否   	| 异常/正常;1-正常;2-异常                                    	|				|
| pupil_light_reflection_abnormal_value | String|| 否   	| 异常值                                                    	|				|
| 遮盖试验（CT）            	|         	|		|      	|                                                         	|				|
| option                   	| Integer 	|		| 否  	| ortho;0-未选中;1-选中                                     	|				|
| distance_type            	| Integer 	|		| 否 	| 远距离类型:<br/>1-内隐斜;<br/>2-外隐斜;<br/>3-垂直隐斜;<br/>4-内斜;<br/>5-外斜;<br/>6-间歇性外斜视;<br/>7-垂直性斜视;<br />8-正位; ||
| distance_value           	| String  	|		| 否  	| 远距离说明                                                	|				|
| near_type               	| Integer 	|		| 否 	| 近距离类型:<br/>1-内隐斜;<br/>2-外隐斜;<br/>3-垂直隐斜;<br/>4-内斜;<br/>5-外斜;<br/>6-间歇性外斜视;<br/>7-垂直性斜视;<br />8-正位; ||
| near_value              	| String  	|		| 否 	| 近距离说明                                              	|				|
| 眼球运动（EOM）            	|         	|		|      	|                                                       	|				|
| eyeball_movement_status  	| Integer 	|		| 否   	| safe/异常;1-SAFE;2-异常                                 	|				|
| eyeball_movement_abnormal_value| String|		| 否   	| 异常值                  									|				|
| 调节视标诱发内斜视                    |         |      |      |                                                                          ||
| accommodative_esotropia               | Integer |      | 否   | 调节性内斜视，1-否；2-是                                                                                                           ||
| accommodative_esotropia_sc            | Integer |      | 否   | SC标志标志，0-未选中;1-选中                                                                                                        ||
| accommodative_esotropia_sc_value      | String  |   20 | 否   | SC标志值                                                                                                                           ||
| accommodative_esotropia_sc_odos       | Integer |      | 否   | SC眼别标志，0-未选;1-OD;2-OS                                                                                                       ||
| accommodative_esotropia_ss            | Integer |      | 否   | SS标志标志，0-未选中;1-选中                                                                                                        ||
| accommodative_esotropia_ss_value      | String  |   20 | 否   | SS标志值                                                                                                                           ||
| accommodative_esotropia_ss_odos       | Integer |      | 否   | SS眼别标志，0-未选;1-OD;2-OS                                                                                                       ||
| accommodative_esotropia_add           | Integer |      | 否   | ADD标志标志，0-未选中;1-选中                                                                                                       ||
| accommodative_esotropia_add_value     | String  |   20 | 否   | ADD标志值                                                                                                                          ||
| accommodative_esotropia_add_odos      | Integer |      | 否   | ADD眼别标志，0-未选;1-OD;2-OS                ||
| 原镜度数                 	|         	|		|		|      														|				|
| data_od_sphere   			| String  	|		| 否   	| OD-球镜    												|				|
| data_od_cylinder 			| String  	|		| 否   	| OD-柱镜    												|				|
| data_od_axis     			| String  	|		| 否   	| OD-轴向    												|				|
| data_od_rem      			| String  	|		| 否   	| OD-备注    												|				|
| data_os_sphere   			| String  	|		| 否   	| OS-球镜    												|				|
| data_os_cylinder 			| String  	|		| 否   	| OS-柱镜    												|				|
| data_os_axis     			| String  	|		| 否   	| OS-轴向    												|				|
| data_os_rem      			| String  	|		| 否   	| 远用OS-备注 												|				|
| 远视力近视力                |         	|      	|       |              												|				|
| data_od_distance_vision   | String  	|		| 否   	| 裸眼远用OD-视力												|				|
| data_os_distance_vision   | String  	|		| 否   	| 裸眼远用OS-视力												|				|
| data_ou_distance_vision   | String  	|		| 否   	| 裸眼远用OU-视力												|				|
| data_od_near_vision       | String  	|		| 否   	| 裸眼近用OD-视力												|				|
| data_os_near_vision       | String  	|		| 否   	| 裸眼近用OS-视力												|				|
| data_ou_near_vision       | String  	|		| 否   	| 裸眼近用OU-视力												|				|
| data_od_distance_original | String  	|		| 否   	| 原镜远用OD-视力												|				|
| data_os_distance_original | String  	|		| 否   	| 原镜远用OS-视力												|				|
| data_ou_distance_original | String  	|		| 否   	| 原镜远用OU-视力												|				|
| data_od_near_original     | String  	|		| 否   	| 原镜近用OD-视力												|				|
| data_os_near_original     | String  	|		| 否   	| 原镜近用OS-视力												|				|
| data_ou_near_original     | String  	|		| 否   	| 原镜近用OU-视力												|				|
| 眼压眼轴数据              	|       	|       |      	|                                                           |				|
| data_od_iop  				| String 	|   12 	| 否   	| OD-眼压,mmgh												| WEBV1.2.3.2 	|
| data_os_iop  				| String 	|   12 	| 否   	| OS-眼压,mmgh 												| WEBV1.2.3.2 	|
| data_od_iop_axis 				| String 	|   12 	| 否   	| OD-眼轴,mm   												| WEBV1.2.3.2 	|
| data_os_iop_axis 				| String 	|   12 	| 否   	| OD-眼轴,mm   												| WEBV1.2.3.2 	|
| 眼球震颤                   |         	|      	|       |                                                           | WEBV1.2.3.2 	|
| nystagmus_status        	| Integer 	|      	| 否   	| 眼球震颤状态:<br/>1-否;<br/>2-是                            	| WEBV1.2.3.2 	|
| nystagmus_middle_status 	| Integer 	|      	| 否   	| 眼球震颤中间带状态:<br/>1-不存在;<br/>2-存在                	| WEBV1.2.3.2 	|
| nystagmus_middle_face   	| Integer 	|      	| 否   	| 眼球震颤中间带面部朝向:<br/>1-面向正前方;<br/>2-面向左前方;<br/>3-面向右前方;| WEBV1.2.3.2 	|
| nystagmus_middle_head   	| Integer 	|      	| 否   	| 眼球震颤中间带头部位置:<br/>1-头部正位;<br/>2-头部向右肩倾斜;<br/>3-头部向左肩倾斜;| WEBV1.2.3.2 	|
| nystagmus_middle_jaw    	| Integer 	|      	| 否   	| 眼球震颤中间带下巴位置:<br/>1-下巴正位;<br/>2-下巴上抬;<br/>3-下巴内收; | WEBV1.2.3.2 	|
| nystagmus_value         	| String  	|   12 	| 否   	| 眼震值                                                    	| WEBV1.2.3.2 	|
| nystagmus_nature        	| Integer 	|      	| 否   	| 震颤性质:<br/>1-冲动型;<br/>2-钟摆型;                       	| WEBV1.2.3.2 	|
| nystagmus_direction     	| Integer 	|      	| 否   	| 震颤方向:<br/>1-水平;<br/>2-垂直;<br/>3-旋转;<br/>3-混合; 	| WEBV1.2.3.2 	|
| 近附加                     |         	|      	|       |                                                          	|				|
| data_add 					| String 	|		| 否   	| 近附加数据 													|				|

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |



### 基础检查获取协议

```http
[GET]/outemr/speciality_check/baselineexam
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |


#### 请求报文参数

| 参数名     | 类型     | 必填   | 说明   |
| ------- | ------ | ---- | ---- |
| trea_id | String | 是    | 就诊ID |

#### 回复报文参数


| 参数名                                   | 类型      | 必填   | 说明                                       | 变更                     |
| ------------------------------------- | ------- | ---- | ---------------------------------------- | ---------------------- |
| trea_id                               | String  | 是    | 就诊ID                                     |                        |
| ----基础检查通用数据（baselineexam）--          |         |      |                                          |                        |
| base_ht_otrho                         | Integer | 否    | 角膜映光点-otrho; 0-未选中;1-选中                  |                        |
| base_ht_horizontal                    | String  | 否    | 角膜映光点-水平，otrho否时有效                       |                        |
| base_ht_vertical_type                 | String  | 否    | 角膜映光点-垂直方向，otrho否时有效；1-R/L；2-L/R         |                        |
| base_ht_vertical                      | String  | 否    | 角膜映光点-垂直                                 |                        |
| base_ht_rem                           | String  | 否    | 角膜映光点-备注                                 | WEBV1.2.3.2            |
| base_npc_ttn                          | Integer | 否    | 集合近点-TTN;to the nose;0:未选中（破裂点、恢复点可编辑）；1:选中; |                        |
| base_npc_break                        | String  | 否    | 集合近点-破裂点                                 |                        |
| base_npc_restore                      | String  | 否    | 集合近点-恢复点                                 |                        |
| base_amp_type                         | String  | 否    | 调节幅度-方法,1-移近法; 2-负镜片法;3-移近/移远法           |                        |
| base_amp_od_cm                        | String  | 否    | 调节幅度-OD                                  |                        |
| base_amp_od                           | String  | 否    | 调节幅度-OD                                  |                        |
| base_amp_os_cm                        | String  | 否    | 调节幅度-OS                                  |                        |
| base_amp_os                           | String  | 否    | 调节幅度-OS                                  |                        |
| base_amp_ou_cm                        | String  | 否    | 调节幅度-OU                                  |                        |
| base_amp_ou                           | String  | 否    | 调节幅度-OU                                  |                        |
| --其它模板数据（template_data)---            |         |      |                                          |                        |
| 瞳孔对光反射                                |         |      |                                          |                        |
| pupil_light_reflection_status         | String  | 否    | 异常/正常;1-正常;2-异常                          |                        |
| pupil_light_reflection_abnormal_value | String  | 否    | 异常值                                      |                        |
| 遮盖试验（CT）                              |         |      |                                          |                        |
| distance_ortho                        | Integer | 否    | ortho;0-未选中;1-选中                         |                        |
| distance_type                         | String  | 否    | 远距离类型:<br/>1-内隐斜;<br/>2-外隐斜;<br/>3-垂直隐斜;<br/>4-内斜;<br/>5-外斜;<br/>6-间歇性外斜视;<br/>7-垂直性斜视;<br />8-正位; |                        |
| distance_value                        | String  | 否    | 远距离说明                                    |                        |
| near_ortho                            | Integer | 否    | ortho;0-未选中;1-选中                         |                        |
| near_type                             | String  | 否    | 近距离类型:<br/>1-内隐斜;<br/>2-外隐斜;<br/>3-垂直隐斜;<br/>4-内斜;<br/>5-外斜;<br/>6-间歇性外斜视;<br/>7-垂直性斜视;<br />8-正位; |                        |
| near_value                            | String  | 否    | 近距离说明                                    |                        |
| 眼球运动（EOM）                             |         |      |                                          |                        |
| eyeball_movement_status               | String  | 否    | safe/异常;1-SAFE;2-异常                      |                        |
| eyeball_movement_abnormal_value       | String  | 否    | 异常值                                      |                        |
| 调节视标诱发内斜视                             |         |      |                                          |                        |
| accommodative_esotropia               | Integer |      | 否                                        | 调节性内斜视，1-否；2-是         |
| accommodative_esotropia_sc            | Integer |      | 否                                        | SC标志标志，0-未选中;1-选中      |
| accommodative_esotropia_sc_value      | String  | 20   | 否                                        | SC标志值                  |
| accommodative_esotropia_sc_odos       | Integer |      | 否                                        | SC眼别标志，0-未选;1-OD;2-OS  |
| accommodative_esotropia_ss            | Integer |      | 否                                        | SS标志标志，0-未选中;1-选中      |
| accommodative_esotropia_ss_value      | String  | 20   | 否                                        | SS标志值                  |
| accommodative_esotropia_ss_odos       | Integer |      | 否                                        | SS眼别标志，0-未选;1-OD;2-OS  |
| accommodative_esotropia_add           | Integer |      | 否                                        | ADD标志标志，0-未选中;1-选中     |
| accommodative_esotropia_add_value     | String  | 20   | 否                                        | ADD标志值                 |
| accommodative_esotropia_add_odos      | Integer |      | 否                                        | ADD眼别标志，0-未选;1-OD;2-OS |
| 原镜度数                                  |         |      |                                          |                        |
| data_od_sphere                        | String  | 否    | OD-球镜                                    |                        |
| data_od_cylinder                      | String  | 否    | OD-柱镜                                    |                        |
| data_od_axis                          | String  | 否    | OD-轴向                                    |                        |
| data_od_rem                           | String  | 否    | OD-备注                                    |                        |
| data_os_sphere                        | String  | 否    | OS-球镜                                    |                        |
| data_os_cylinder                      | String  | 否    | OS-柱镜                                    |                        |
| data_os_axis                          | String  | 否    | OS-轴向                                    |                        |
| data_os_rem                           | String  | 否    | 远用OS-备注                                  |                        |
| 远视力近视力                                |         |      |                                          |                        |
| data_od_distance_vision               | String  | 否    | 裸眼远用OD-视力                                |                        |
| data_os_distance_vision               | String  | 否    | 裸眼远用OS-视力                                |                        |
| data_ou_distance_vision               | String  | 否    | 裸眼远用OU-视力                                |                        |
| data_distance_vision_rem              | String  | 否    | 裸眼远用视力备注                                 |                        |
| data_od_near_vision                   | String  | 否    | 裸眼近用OD-视力                                |                        |
| data_os_near_vision                   | String  | 否    | 裸眼近用OS-视力                                |                        |
| data_ou_near_vision                   | String  | 否    | 裸眼近用OU-视力                                |                        |
| data_near_vision_rem                  | String  | 否    | 裸眼近用视力备注                                 |                        |
| data_od_distance_original             | String  | 否    | 原镜远用OD-视力                                |                        |
| data_os_distance_original             | String  | 否    | 原镜远用OS-视力                                |                        |
| data_ou_distance_original             | String  | 否    | 原镜远用OU-视力                                |                        |
| data_distance_original_rem            | String  | 否    | 原镜远用视力备注                                 |                        |
| data_od_near_original                 | String  | 否    | 原镜近用OD-视力                                |                        |
| data_os_near_original                 | String  | 否    | 原镜近用OS-视力                                |                        |
| data_ou_near_original                 | String  | 否    | 原镜近用OU-视力                                |                        |
| data_near_original_rem                | String  | 否    | 原镜近用视力备注                                 |                        |
| 眼压眼轴数据                                |         |      |                                          |                        |
| data_od_iop                           | String  | 否    | OD-眼压,mmgh                               | V1.2.3.2               |
| data_os_iop                           | String  | 否    | OS-眼压,mmgh                               | V1.2.3.2               |
| data_od_iop_axis                      | String  | 否    | OD-眼轴,mm                                 | V1.2.3.2               |
| data_os_iop_axis                      | String  | 否    | OD-眼轴,mm                                 | V1.2.3.2               |
| 眼球震颤                                  |         |      |                                          | V1.2.3.2               |
| nystagmus_status                      | Integer | 否    | 眼球震颤状态:<br/>1-否;<br/>2-是                 | V1.2.3.2               |
| nystagmus_middle_status               | Integer | 否    | 眼球震颤中间带状态:<br/>1-不存在;<br/>2-存在           | V1.2.3.2               |
| nystagmus_middle_face                 | Integer | 否    | 眼球震颤中间带面部朝向:<br/>1-面向正前方;<br/>2-面向左前方;<br/>3-面向右前方; | V1.2.3.2               |
| nystagmus_middle_head                 | Integer | 否    | 眼球震颤中间带头部位置:<br/>1-头部正位;<br/>2-头部向右肩倾斜;<br/>3-头部向左肩倾斜; | V1.2.3.2               |
| nystagmus_middle_jaw                  | Integer | 否    | 眼球震颤中间带下巴位置:<br/>1-下巴正位;<br/>2-下巴上抬;<br/>3-下巴内收; | V1.2.3.2               |
| nystagmus_value                       | String  | 否    | 眼震值                                      | V1.2.3.2               |
| nystagmus_nature                      | Integer | 否    | 震颤性质:<br/>1-冲动型;<br/>2-钟摆型;              | V1.2.3.2               |
| nystagmus_direction                   | Integer | 否    | 震颤方向:<br/>1-水平;<br/>2-垂直;<br/>3-旋转;<br/>3-混合; | V1.2.3.2               |
| 近附加                                   |         |      |                                          |                        |
| data_add                              | String  | 否    | 近附加数据                                    |                        |




















## 训练仪器套餐

### 训练仪器套餐-获取列表协议

```http
[GET]/outemr/training_instrument/packages
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### 请求报文参数

| 参数名       | 类型      | 必填   | 说明                         |
| --------- | ------- | ---- | -------------------------- |
| key       | String  | 否    | 套餐名称，空是查询所有                |
| type      | Integer | 否    | 所属类型,0: 科室;1: 个人           |
| user_id   | String  | 否    | 个人ID，所属类型为个人时必填，可从前端请求头中获取 |
| depaid    | String  | 否    | 科室ID，所属类型为科室时必填，可从前端请求头中获取 |
| page_size | Integer | 否    | 每页条数 空表示10条                |
| page_num  | Integer | 否    | 第几页 空表示第1页                 |

#### 回复报文参数

| 参数名          | 类型         | 必填   | 说明     |
| ------------ | ---------- | ---- | ------ |
| total        | Integer    | 是    | 总数     |
| page_num     | Integer    | 是    | 当前页    |
| page_size    | Integer    | 是    | 每页的数量  |
| pages        | Integer    | 是    | 总页数    |
| package_list | ObjectList | 否    | 套餐列表信息 |

##### 套餐列表信息

| 参数名              | 类型      | 必填   | 说明               |
| ---------------- | ------- | ---- | ---------------- |
| pack_id          | String  | 是    | 套餐id,uniqueid生成  |
| pack_name        | String  | 是    | 套餐名称             |
| pack_create_time | Long    | 是    | 创建时间,unixtime    |
| pack_type        | Integer | 是    | 所属类型,0: 科室;1: 个人 |
| pack_userid      | String  | 是    | 用户ID,创建者，且个人时所属  |
| pack_depa_id     | String  | 否    | 科室ID,所属科室        |

### 训练仪器套餐-获取明细协议

```http
[GET]/outemr/training_instrument/package/{pack_id}
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### 请求报文参数

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| pack_id | String | 是    | 套餐ID，放在URL中 |

#### 回复报文参数

| 参数名              | 类型         | 必填   | 说明               |
| ---------------- | ---------- | ---- | ---------------- |
| pack_id          | String     | 是    | 套餐id,uniqueid生成  |
| pack_name        | String     | 是    | 套餐名称             |
| pack_create_time | Long       | 是    | 创建时间,unixtime    |
| pack_type        | Integer    | 是    | 所属类型,0: 科室;1: 个人 |
| pack_userid      | String     | 是    | 用户ID,创建者，且个人时所属  |
| pack_depa_id     | String     | 否    | 科室ID,所属科室        |
| pack_items       | ObjectList | 否    | 套餐明细列表信息         |

##### 套餐明细列表信息

| 参数名              | 类型      | 必填   | 说明              |
| ---------------- | ------- | ---- | --------------- |
| item_id          | String  | 是    | 明细ID,uniqueid生成 |
| item_clas_id     | String  | 否    | 商品类别ID,商品类别码表   |
| item_clas_code   | String  | 是    | 商品类别代码,商品类别码表   |
| item_clas_name   | String  | 是    | 商品类别名称,商品类别码表   |
| item_goods_id    | String  | 是    | 商品ID            |
| item_goods_name  | String  | 是    | 商品名称            |
| item_count       | Integer | 是    | 这商品的数量          |
| item_goods_unit  | String  | 否    | 商品单位            |
| item_goods_price | Double  | 否    | 商品价格，单位元        |

### 训练仪器套餐-创建修改协议

```http
[POST]/outemr/training_instrument/package/{pack_id}
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### 请求URL参数

| 参数名     | 类型     | 必填   | 说明                       |
| ------- | ------ | ---- | ------------------------ |
| pack_id | String | 否    | 套餐ID，放在URL中，空时为新建，不空时为更新 |

#### 请求报文参数

| 参数名          | 类型         | 长度   | 必填   | 说明                |
| ------------ | ---------- | ---- | ---- | ----------------- |
| pack_name    | String     | 64   | 是    | 套餐名称              |
| pack_type    | Integer    |      | 是    | 所属类型, 0: 科室;1: 个人 |
| pack_userid  | String     |      | 是    | 用户ID,创建者，且个人时所属   |
| pack_depa_id | String     |      | 否    | 科室ID,所属科室         |
| pack_items   | ObjectList |      | 否    | 套餐明细列表信息          |

##### 套餐明细列表信息

| 参数名             | 类型      | 必填   | 说明            |
| --------------- | ------- | ---- | ------------- |
| item_clas_id    | String  | 否    | 商品类别ID,商品类别码表 |
| item_clas_code  | String  | 是    | 商品类别代码,商品类别码表 |
| item_goods_id   | String  | 是    | 商品ID          |
| item_goods_name | String  | 是    | 商品名称          |
| item_count      | Integer | 是    | 这商品的数量        |
| item_goods_unit | String  | 否    | 商品单位          |

#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明   |
| ------- | ------ | ---- | ---- |
| pack_id | String | 是    | 套餐ID |

### 训练仪器套餐-删除

```http
[DELETE]/outemr/training_instrument/package/{pack_id}
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### 请求报文参数

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| pack_id | String | 是    | 套餐ID，放在URL中 |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
|      |      |      |      |

### 门诊小病历界面保存协议（CEF专用）

```url
[POST]/outemr/outpatient/treatment/cef/save
```
说明：因CEF没有诊断数据，所以此协议为CEF专用,和之前的小病历保存唯一区别为，此协议没有诊断列表

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.2 | 新增   |

#### 请求报文参数

| 参数名                     | 类型         | 长度   | 必填   | 说明                        |
| ----------------------- | ---------- | ---- | ---- | ------------------------- |
| trea_id                 | String     |      | 是    | 就诊记录id                    |
| comp_id                 | String     |      | 否    | 主诉ID                      |
| comp_content            | String     |      | 否    | 主诉内容                      |
| illn_id                 | String     |      | 否    | 现病史模板ID                   |
| illn_content            | String     |      | 否    | 现病史内容                     |
| emr_trea_suggestion     | String     |      | 否    | 处理意见                      |
| emr_spec_text           | String     |      | 否    | 专科检查正文，方便界面展示             |
| emr_disease_negation    | Integer    |      | 是    | 疾病史否认;0-未询问;1-患者否认;2-患者承认 |
| emr_allergic_negation   | Integer    |      | 是    | 过敏史否认;0-未询问;1-患者否认;2-患者承认 |
| emr_operation_negation  | Integer    |      | 是    | 手术史否认;0-未询问;1-患者否认;2-患者承认 |
| emr_family_negation     | Integer    |      | 是    | 家族史否认;0-未询问;1-患者否认;2-患者承认 |
| past_disease_list       | ObjectList |      | 否    | 患者疾病史列表                   |
| past_disease_list_del   | ObjectList |      | 否    | 要删除的患者疾病史id列表             |
| past_allergic_list      | ObjectList |      | 否    | 患者过敏史列表                   |
| past_allergic_list_del  | ObjectList |      | 否    | 要删除的患者疾病史id列表             |
| past_operation_list     | ObjectList |      | 否    | 患者手术史列表                   |
| past_operation_list_del | ObjectList |      | 否    | 要删除的患者手术史id列表             |
| past_family_list        | ObjectList |      | 否    | 患者家族史列表                   |
| past_family_list_del    | ObjectList |      | 否    | 要删除的患者家族史id列表             |
| personal_list           | ObjectList |      | 否    | 其他个人史列表                   |
| personal_list_del       | ObjectList |      | 否    | 要删除的其他个人史id列表             |
| emr_followup_number     | Integer    |      | 否    | 随访时间值                     |
| emr_followup_unit       | Integer    |      | 否    | 随访时间单位；1-天;2-周;3-月;4-年    |
| emr_followup_type       | Integer    |      | 是    | 随访时间类型；0:定期;1:不定期         |
| emr_followup_notfixed   | String     | 24   | 否    | 不定期随访时间                   |

患者疾病史列表说明

| 参数名                 | 类型      | 必填   | 说明               |
| ------------------- | ------- | ---- | ---------------- |
| reco_id             | String  | 否    | 记录ID      没有表示新增 |
| diag_id             | String  | 是    | 对应诊断记录的ID        |
| diag_name           | String  | 是    | 诊断名称             |
| diag_icd            | String  | 是    | 诊断ICD编码，剑形编码，病因  |
| diag_attach         | String  | 是    | 附加码，星形编码，临床表现    |
| reco_persistence    | Integer | 否    | 疾病持续时间           |
| reco_pers_unit_name | String  | 否    | 疾病持续时间单位         |
| reco_pers_unit_code | String  | 否    | 疾病持续时间单位代码       |
| reco_describe       | String  | 是    | 描述信息，扩展描述        |

要删除的患者疾病史id列表说明

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| reco_id | String | 否    | 要删除的患者疾病史id |

患者过敏史列表说明

| 参数名           | 类型      | 必填   | 说明            |
| ------------- | ------- | ---- | ------------- |
| reco_id       | String  | 否    | 记录ID   没有表示新增 |
| alle_id       | String  | 否    | 过敏原主键         |
| alle_code     | String  | 否    | 过敏原编码         |
| alle_name     | String  | 是    | 过敏原名称         |
| alle_type     | Integer | 是    | 过敏类别          |
| reco_describe | String  | 否    | 描述信息，扩展描述     |


要删除的患者过敏史id列表说明

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| reco_id | String | 否    | 要删除的患者过敏史id |

患者手术史列表说明

| 参数名           | 类型     | 必填   | 说明            |
| ------------- | ------ | ---- | ------------- |
| reco_id       | String | 否    | 记录ID   没有表示新增 |
| oper_id       | String | 否    | 术式主键          |
| oper_name     | String | 是    | 术式名称          |
| oper_code     | String | 否    | 术式编码          |
| oper_date     | Date   | 否    | 手术日期          |
| reco_describe | String | 否    | 描述信息，扩展描述     |

要删除的患者手术史id列表说明

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| reco_id | String | 否    | 要删除的患者手术史id |

患者家族史列表说明

| 参数名          | 类型     | 必填   | 说明           |
| ------------ | ------ | ---- | ------------ |
| reco_id      | String | 否    | 记录ID  没有表示新增 |
| reco_content | String | 否    | 家族史内容        |

要删除的患者家族史id列表说明

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| reco_id | String | 否    | 要删除的患者家族史id |


其他个人史列表说明


| 参数名          | 类型     | 必填   | 说明          |
| ------------ | ------ | ---- | ----------- |
| reco_id      | String | 否    | 记录ID 没有表示新增 |
| reco_content | String | 否    | 个人史内容       |


要删除的其他个人史id列表说明

| 参数名     | 类型     | 必填   | 说明          |
| ------- | ------ | ---- | ----------- |
| reco_id | String | 否    | 要删除的其他个人史id |


#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |



## 患者信息

### 批量更新患者信息的同步标志为已同步

```http
[PUT]/outemr/patients/syncs
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### 请求报文参数 ObjectList

| 参数名     | 类型     | 必填   | 说明   |
| ------- | ------ | ---- | ---- |
| pati_id | String | 否    | 患者ID |
| tena_id | String | 否    | 租户ID |

#### 回复报文参数(ObjectList)

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |

### 更新单个患者信息的同步标志

```http
[PUT]/outemr/patients/sync/{pati_id}
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.3 | 新增   |

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |


#### 请求报文参数 ObjectList

| 参数名  | 类型      | 必填   | 说明          |
| ---- | ------- | ---- | ----------- |
| sync | Integer | 否    | 0:未同步，1:已同步 |

#### 回复报文参数(ObjectList)

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |


##角膜地形图


### 角膜地下图文件预上传

```http
[POST]/outemr/file/file_cornea/pre_upload
```

说明：
  获取oss地址，文件名等信息

#### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| Web 1.3.3.1 | 新增   |




#### 请求报文参数

| 参数名            | 类型      | 必填   | 说明                                     |
| -------------- | ------- | ---- | -------------------------------------- |
| file_size      | Long    | 否    | 文件内容长度                                 |
| file_extension | String  | 是    | 文件扩展名(不带“.“)                           |
| file_type      | String  | 是    | 文件类型，Content-Type                      |
| source_type    | Integer | 是    | 14 角膜地形图导出的MXF文件  15：jpg/jpeg；png； 16：Excle 17：xml |


#### 回复报文参数

| 参数名               | 类型     | 必填   | 说明                       |
| ----------------- | ------ | ---- | ------------------------ |
| url               | String | 是    | 文件上传的oss的URL             |
| file_id           | Long   | 是    | 文件资源id                   |
| OSS_access_key_id | String | 是    | Bucket 拥有者的Access Key Id |
| policy            | String | 是    | Base64编码的JSON内容          |
| signature         | String | 是    | 签名                       |
| key               | String | 是    | 上传文件路径                   |


### 角膜地下图文件 确认已上传

```http
[POST]/outemr/file/file_cornea/upload_access
```

说明：
  确认file_id对应的文件

#### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| Web 1.3.3.1 | 新增   |


#### 请求报文参数

| 参数名                | 类型     | 必填   | 说明                                       |
| ------------------ | ------ | ---- | ---------------------------------------- |
| file_id            | Long   | 是    | 文件资源id                                   |
| file_report_time   | String | 是    | 文件报告时间:yyyy-MM-dd [v1.3.9.3.2新增] |
| file_report_type   | String | 是    | 文件报告类型(传ID)   |
| file_pati_id       | String | 是    | 患者ID [v1.3.7新增]                          |
| file_resource_type | String | 是    | 文件资源类型,1:mxf;2:.xls/.xlsx;3:图片格式(png/jpg/jpeg);4:xml [v1.3.9.3.2新增] |



#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |


#### 上传完成之后发消息

队列名称: SC_CORNEA_ANALYSIS

RedisDB: 15

涉及表：check_cornea_topog_file

消息队列的内容是:

| 参数名     | 类型     | 必填   | 说明      |
| ------- | ------ | ---- | ------- |
| file_id | String | 是    | 地形图文件ID |



## 查询报告

### 角膜地形图报告患者信息列表

```
 [GET]/outemr/cornea_topog/patients
```

####修改更新记录

| 对应版本     | 说明                                       |
| -------- | ---------------------------------------- |
| V1.3.3.1 | 新增 角膜地形图报告患者信息列表  涉及表：check_cornea_topog |

| 参数名               | 类型      | 必填   | 说明                                 |
| ----------------- | ------- | ---- | ---------------------------------- |
| key               | String  | 是    | 患者ID                               |
| report_time_type  | Integer | 否    | 报告时间段 (1:今天,2:一周,3:一个月,4:三个月,5:一年) |
| report_start_time | String  | 否    | 报告开始时间yyyy-MM-dd                   |
| report_end_time   | String  | 否    | 报告结束时间yyyy-MM-dd                   |
| report_type       | String  | 是    | 报告类型传ID          |
| page_size         | Integer | 否    | 每页条数 空表示10条                        |
| page_num          | Integer | 否    | 第几页 空表示第1页                         |

#### 回复报文参数Object

| 参数名       | 类型         | 必填   | 说明     |
| --------- | ---------- | ---- | ------ |
| page_num  | Integer    | 是    | 当前页    |
| page_size | Integer    | 是    | 每页的数量  |
| total     | Integer    | 是    | 总记录数   |
| pages     | Integer    | 是    | 总页数    |
| list      | ObjectList | 否    | 患者信息列表 |

患者信息列表

| 参数名                | 类型      | 必填   | 说明                          |
| ------------------ | ------- | ---- | --------------------------- |
| topog_id           | String  | 是    | 地形图报告ID                     |
| patient_id         | String  | 是    | 患者ID                        |
| patient_name       | String  | 是    | 患者姓名                        |
| patient_gender     | Integer | 是    | 1:男，2:女                     |
| patient_age        | String  | 是    | 患者年龄                        |
| project_name       | String  | 是    | 项目名称                        |
| report_time        | String  | 是    | 报告时间                        |
| file_resource_type | String  | 是    | 文件类型,1:mxf;2:.xls/.xlsx;3:图片格式(png/jpg/jpeg);4:xml [v1.3.9.3.2新增]  |
| file_analysis_state    | String  | 否    | 文件解析状态,0:未处理;2:解析失败;3:已解析 [v1.3.9.3.2新增]                   |
| file_analysis_msg    | String  | 否    | 文件解析信息[v1.3.9.3.2新增]                      |
| cornea_image_id    | String  | 否    | 角膜图片ID                      |
| cornea_image_url   | String  | 否    | 角膜图片URL                     |



### 角膜地形图报告详情

```
 [GET]/outemr/cornea_topog/{topog_id}
```

#### 修改更新记录

| 对应版本     | 说明                                  |
| -------- | ----------------------------------- |
| V1.3.3.1 | 新增 角膜地形图报告详情 涉及表：check_cornea_topog |

#### PathVariable
| 参数名      | 类型     | 必填   | 说明      |
| -------- | ------ | ---- | ------- |
| topog_id | String | 是    | 地形图报告ID |

#### 请求报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |

#### 回复报文参数Object

| 参数名                          | 类型      | 必填   | 说明                  |
| ---------------------------- | ------- | ---- | ------------------- |
| topog_id                     | String  | 是    | 地形图报告ID             |
| patient_id                   | String  | 是    | 患者ID                |
| patient_name                 | String  | 是    | 患者姓名                |
| patient_gender               | Integer | 是    | 患者性别 1:男，2:女        |
| topog_instrument_serialno    | String  | 否    | 仪器流水号               |
| topog_instrument_comments    | String  | 否    | 仪器备注                |
| topog_entrydate              | String  | 是    | 报告时间                |
| topog_od_attributes          | String  | 否    | 报告参数                |
| topog_od_scanningcentre_x    | String  | 否    | ScanningCenterX     |
| topog_od_scanningcentre_y    | String  | 否    | ScanningCenterY     |
| topog_od_bitmapscalar        | String  | 否    | BitmapScalar        |
| topog_od_profiledistance     | String  | 否    | ProfileDistance     |
| topog_od_movementscore       | String  | 否    | MovementScore       |
| topog_od_distancescore       | String  | 否    | DistanceScore       |
| topog_od_centeringscore      | String  | 否    | CenteringScore      |
| topog_od_apexdistance        | String  | 否    | ApexDistance        |
| topog_od_analysiscomplete    | String  | 否    | AnalysisComplete    |
| topog_od_flatk               | String  | 否    | FlatK               |
| topog_od_flatangle           | String  | 否    | FlatAngle           |
| topog_od_steepk              | String  | 否    | SteepK              |
| topog_od_steepangle          | String  | 否    | SteepAngle          |
| topog_od_cornealheight       | String  | 否    | CornealHeight       |
| topog_od_tangentialcurvature | String  | 否    | TangentialCurvature |
| topog_od_axialcurvature      | String  | 否    | AxialCurvature      |
| topog_od_tearfilmqualitydata | String  | 否    | TearFilmQualityData |
| topog_od_pupilcentrex        | String  | 否    | PupilCentreX        |
| topog_od_pupilcentrey        | String  | 否    | PupilCentreY        |
| topog_od_pupiloutline        | String  | 否    | PupilOutline        |
| topog_od_bitmap_fileid       | String  | 否    | Bitmap              |
| topog_os_attributes          | String  | 否    | 报告参数                |
| topog_os_scanningcentre_x    | String  | 否    | ScanningCenterX     |
| topog_os_scanningcentre_y    | String  | 否    | ScanningCenterY     |
| topog_os_bitmapscalar        | String  | 否    | BitmapScalar        |
| topog_os_profiledistance     | String  | 否    | ProfileDistance     |
| topog_os_movementscore       | String  | 否    | MovementScore       |
| topog_os_distancescore       | String  | 否    | DistanceScore       |
| topog_os_centeringscore      | String  | 否    | CenteringScore      |
| topog_os_apexdistance        | String  | 否    | ApexDistance        |
| topog_os_analysiscomplete    | String  | 否    | AnalysisComplete    |
| topog_os_flatk               | String  | 否    | FlatK               |
| topog_os_flatangle           | String  | 否    | FlatAngle           |
| topog_os_steepk              | String  | 否    | SteepK              |
| topog_os_steepangle          | String  | 否    | SteepAngle          |
| topog_os_cornealheight       | String  | 否    | CornealHeight       |
| topog_os_tangentialcurvature | String  | 否    | TangentialCurvature |
| topog_os_axialcurvature      | String  | 否    | AxialCurvature      |
| topog_os_tearfilmqualitydata | String  | 否    | TearFilmQualityData |
| topog_os_pupilcentrex        | String  | 否    | PupilCentreX        |
| topog_os_pupilcentrey        | String  | 否    | PupilCentreY        |
| topog_os_pupiloutline        | String  | 否    | PupilOutline        |
| topog_os_bitmap_fileid       | String  | 否    | Bitmap              |



##门诊检查处方


### 门诊检查处方列表获取

```http
[GET]/outemr/examination/list
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


处理说明：
属于挂号套餐的检查需要包含

#### 请求报文参数

| 参数名     | 类型     | 必填   | 说明   |
| ------- | ------ | ---- | ---- |
| trea_id | String | 是    | 就诊ID |

#### 回复报文参数(ObjectList)

| 参数名           | 类型      | 必填   | 说明                                       |
| ------------- | ------- | ---- | ---------------------------------------- |
| info_id       | String  | 是    | 检查项目ID 如果是挂号套餐中的检查 则返回检查费ID  否则 就是门诊检查信息表的主键 |
| info_type     | Integer | 是    | 项目类型   0:检查费;1:检查套餐;2:其他费用 9挂号套餐中的检查     |
| info_price    | Double  | 是    | 单价                                       |
| info_name     | String  | 是    | 项目名称                                     |
| info_bizid    | String  | 是    | 原业务ID                                    |
| info_num      | Integer | 是    | 数量                                       |
| exe_dept_name | String  | 是    | 执行科室名称                                   |
| charge_state  | Integer | 是    | 收费状态   1-未收费;2-已收费;3-未退费;4-已退费;5-超时失效    |


### 门诊检查处方提交申请

```http
[POST]/outemr/examination/submit
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


处理说明：
提交时只包含新增的

#### 请求报文参数

| 参数名              | 类型         | 必填   | 说明     |
| ---------------- | ---------- | ---- | ------ |
| trea_id          | String     | 是    | 就诊ID   |
| examination_list | ObjectList | 是    | 检查处方列表 |

检查处方列表

| 参数名        | 类型      | 必填   | 说明                         |
| ---------- | ------- | ---- | -------------------------- |
| info_id    | String  | 是    | 检查项目ID  唯一键  修改时须提交 新增时为空  |
| info_type  | Integer | 是    | 项目类型   0:检查费;1:检查套餐;2:其他费用 |
| info_bizid | String  | 是    | 原业务ID                      |
| info_num   | Integer | 是    | 数量                         |
| is_del     | Integer | 是    | 删除标志 0未删除 1已删除             |


#### 回复报文参数(ObjectList)

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |



### 门诊检查处方退费申请

```http
[POST]/outemr/examination/refund_submit
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


处理说明：
只有已收费的才可以申请退费
调用收费系统提供的接口生态退费订单

#### 请求报文参数

| 参数名              | 类型         | 必填   | 说明    |
| ---------------- | ---------- | ---- | ----- |
| trea_id          | String     | 是    | 就诊ID  |
| examination_list | ObjectList | 是    | 检查单列表 |

检查单列表说明

| 参数名     | 类型     | 必填   | 说明                   |
| ------- | ------ | ---- | -------------------- |
| info_id | String | 是    | 检查项目ID  就是门诊检查信息表的主键 |

#### 回复报文参数(ObjectList)

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |





### 检查套餐选项列表

```http
[GET]/outemr/examination/pacakge_options
```

处理说明：
这里只取有效的

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数


| 参数名         | 类型     | 必填   | 说明     |
| ----------- | ------ | ---- | ------ |
| bill_deptid | String | 否    | 开单科室id |


#### 回复报文参数

| 参数名          | 类型     | 必填   | 说明   |
| ------------ | ------ | ---- | ---- |
| package_id   | String | 是    | 套餐id |
| package_name | String | 是    | 套餐名称 |




###检查套餐详情

```http
  [GET]/outemr/examination_package/{package_id} 
```


####修改更新记录

| 对应版本   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |

#### 请求报文参数

 PathVariable

| 参数名        | 类型     | 必填   | 说明   |
| ---------- | ------ | ---- | ---- |
| package_id | String | 是    | 套餐ID |


#### 回复报文参数 

| 参数名                | 类型         | 必填   | 说明     |
| ------------------ | ---------- | ---- | ------ |
| package_id         | String     | 是    | 套餐ID   |
| package_name       | String     | 是    | 套餐名称   |
| package_real_price | Double     | 是    | 执行价格   |
| exe_dept_name      | String     | 是    | 执行科室名称 |
| list               | ObjectList | 是    | 检查费列表  |


检查费列表说明


| 参数名       | 类型      | 必填   | 说明                    |
| --------- | ------- | ---- | --------------------- |
| fee_type  | Integer | 是    | 表示来自哪种费用 0检查费用  2其他费用 |
| fee_id    | String  | 是    | 费用ID                  |
| fee_name  | String  | 是    | 费用名称                  |
| fee_price | Double  | 是    | 费用价格                  |
| fee_num   | Integer | 是    | 数量                    |

单位： 写死“人次”




##医生个人检查套餐


### 个人检查套餐列表

```http
[GET]/outemr/personal/examination_package/list
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
|      |      |      |      |


#### 回复报文参数ObjectList

| 参数名          | 类型     | 必填   | 说明   |
| ------------ | ------ | ---- | ---- |
| package_id   | String | 是    | 套餐id |
| package_name | String | 是    | 套餐名称 |



### 个人检查套餐详情

```http
[GET]/outemr/personal/examination_package/{package_id}
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数

PathVariable

| 参数名        | 类型     | 必填   | 说明   |
| ---------- | ------ | ---- | ---- |
| package_id | String | 是    | 套餐id |


#### 回复报文参数

| 参数名           | 类型         | 必填   | 说明        |
| ------------- | ---------- | ---- | --------- |
| package_id    | String     | 是    | 套餐id      |
| package_name  | String     | 是    | 套餐名称      |
| exe_deptid    | String     | 是    | 执行科室      |
| exe_dept_name | String     | 是    | 执行科室名称    |
| package_price | String     | 是    | 套餐价格 临时计算 |
| list          | ObjectList | 是    | 检查费列表     |

检查费列表

| 参数名        | 类型      | 必填   | 说明                    |
| ---------- | ------- | ---- | --------------------- |
| fee_type   | Integer | 是    | 表示来自哪种费用 0检查费用  2其他费用 |
| fee_id     | String  | 是    | 费用ID                  |
| fee_name   | String  | 是    | 费用名称                  |
| fee_price  | Double  | 是    | 费用价格                  |
| fee_num    | Integer | 是    | 数量                    |
| fee_charge | String  | 是    | 收费类别名称                |


### 个人检查套餐新增/修改

```http
[POST]/outemr/personal/examination_package/{package_id}
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数

PathVariable

| 参数名        | 类型     | 必填   | 说明               |
| ---------- | ------ | ---- | ---------------- |
| package_id | String | 是    | 套餐id  有为修改没有时为新增 |


RequestPara

| 参数名          | 类型         | 必填   | 说明    |
| ------------ | ---------- | ---- | ----- |
| package_name | String     | 是    | 套餐名称  |
| list         | ObjectList | 是    | 检查费列表 |


检查费列表

| 参数名      | 类型      | 必填   | 说明                    |
| -------- | ------- | ---- | --------------------- |
| fee_type | Integer | 是    | 表示来自哪种费用 0检查费用  2其他费用 |
| fee_id   | String  | 是    | 费用ID                  |
| fee_num  | Integer | 是    | 数量                    |


#### 回复报文参数

| 参数名        | 类型     | 必填   | 说明   |
| ---------- | ------ | ---- | ---- |
| package_id | String | 是    | 套餐id |


### 个人检查套餐删除

```http
[DELETE]/outemr/personal/examination_package/{package_id}
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数

PathVariable

| 参数名        | 类型     | 必填   | 说明               |
| ---------- | ------ | ---- | ---------------- |
| package_id | String | 是    | 套餐id  有为修改没有时为新增 |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |



### 检查费/其他费列表

```http
[GET]/outemr/personal/examination_package/fee_options
```

说明：
 由检查费用和其他费用两个集合组成
 检查费在前，其他费用在后
 不包含停用的

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数


| 参数名  | 类型     | 必填   | 说明                       |
| ---- | ------ | ---- | ------------------------ |
| key  | String | 否    | 查询关键字 费用名称，拼音码，或五笔码 模糊匹配 |

#### 回复报文参数

检查费列表

| 参数名       | 类型      | 必填   | 说明                    |
| --------- | ------- | ---- | --------------------- |
| fee_type  | Integer | 是    | 表示来自哪种费用 0检查费用  2其他费用 |
| fee_id    | String  | 是    | 费用ID                  |
| fee_name  | String  | 是    | 费用名称                  |
| fee_price | Double  | 是    | 费用价格                  |


##病历记录

### 检查处方记录列表

```http
[GET]/outemr/emr/examination_list
```

说明：

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.4 | 新增   |


#### 请求报文参数


| 参数名       | 类型      | 必填   | 说明          |
| --------- | ------- | ---- | ----------- |
| trea_id   | String  | 是    | 本次就诊的ID     |
| page_size | Integer | 否    | 每页条数 空表示10条 |
| page_num  | Integer | 否    | 第几页 空表示第1页  |

#### 回复报文参数

| 参数名       | 类型         | 必填   | 说明    |
| --------- | ---------- | ---- | ----- |
| page_num  | Integer    | 是    | 当前页   |
| page_size | Integer    | 是    | 每页的数量 |
| pages     | Integer    | 是    | 总页数   |
| list      | ObjectList | 否    | 检查列表  |

检查列表说明

| 参数名                 | 类型         | 必填   | 说明     |
| ------------------- | ---------- | ---- | ------ |
| trea_id             | String     | 是    | 就诊号    |
| trea_visi_time      | String     | 是    | 就诊日期   |
| depa_name           | String     | 是    | 就诊科室   |
| diag_name           | String     | 否    | 诊断名称   |
| trea_visi_user_name | String     | 是    | 接诊医生   |
| list                | ObjectList | 是    | 检查处方列表 |


检查处方列表

| 参数名              | 类型      | 必填   | 说明         |
| ---------------- | ------- | ---- | ---------- |
| info_id          | String  | 是    | 检查项目ID     |
| info_name        | String  | 是    | 项目名称       |
| info_num         | Integer | 是    | 数量         |
| info_price       | Double  | 是    | 单价         |
| bill_doctor_name | String  | 是    | 申请医生       |
| bill_dept_name   | String  | 否    | 开单科室（申请科室） |
| exe_dept_name    | String  | 否    | 执行科室       |
| exe_doctor_name  | String  | 是    | 执行医生       |


##外来处方来源


### 外来医院列表

```http
[GET]/outemr/out_pres/hospital_list
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数


| 参数名       | 类型      | 必填   | 说明          |
| --------- | ------- | ---- | ----------- |
| page_size | Integer | 否    | 每页条数 空表示10条 |
| page_num  | Integer | 否    | 第几页 空表示第1页  |

#### 回复报文参数

| 参数名       | 类型         | 必填   | 说明    |
| --------- | ---------- | ---- | ----- |
| page_num  | Integer    | 是    | 当前页   |
| page_size | Integer    | 是    | 每页的数量 |
| pages     | Integer    | 是    | 总页数   |
| list      | ObjectList | 否    | 检查列表  |

检查列表说明

| 参数名           | 类型     | 必填   | 说明   |
| ------------- | ------ | ---- | ---- |
| hospital_id   | String | 是    | 医院ID |
| hospital_name | String | 是    | 医院名称 |


### 外来医院保存

```http
[POST]/outemr/out_pres/hospital_save
```

新增和修改都有可能

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数ObjectList


| 参数名           | 类型     | 必填   | 说明                 |
| ------------- | ------ | ---- | ------------------ |
| hospital_id   | String | 否    | 医院ID  没有表示新增 有表示修改 |
| hospital_name | String | 是    | 医院名称               |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |


### 外来医院删除

```http
[DELETE]/outemr/out_pres/hospital_delete/{hospital_id}
```



#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数


PathVarible
| 参数名         | 类型     | 必填   | 说明   |
| ----------- | ------ | ---- | ---- |
| hospital_id | String | 否    | 医院ID |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |



### 外来医生列表

```http
[GET]/outemr/out_pres/doctor_list
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数


| 参数名       | 类型      | 必填   | 说明          |
| --------- | ------- | ---- | ----------- |
| page_size | Integer | 否    | 每页条数 空表示10条 |
| page_num  | Integer | 否    | 第几页 空表示第1页  |

#### 回复报文参数

| 参数名       | 类型         | 必填   | 说明    |
| --------- | ---------- | ---- | ----- |
| page_num  | Integer    | 是    | 当前页   |
| page_size | Integer    | 是    | 每页的数量 |
| pages     | Integer    | 是    | 总页数   |
| list      | ObjectList | 否    | 检查列表  |

检查列表说明

| 参数名         | 类型     | 必填   | 说明   |
| ----------- | ------ | ---- | ---- |
| doctor_id   | String | 是    | 医生ID |
| doctor_name | String | 是    | 医生姓名 |


### 外来医生保存

```http
[POST]/outemr/out_pres/doctor_save
```

新增和修改都有可能

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数ObjectList


| 参数名         | 类型     | 必填   | 说明                |
| ----------- | ------ | ---- | ----------------- |
| doctor_id   | String | 是    | 医生ID 没有表示新增 有表示修改 |
| doctor_name | String | 是    | 医生姓名              |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |


### 外来医生删除

```http
[DELETE]/outemr/out_pres/doctor_delete/{doctor_id}
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数ObjectList

PathVarible
| 参数名       | 类型     | 必填   | 说明   |
| --------- | ------ | ---- | ---- |
| doctor_id | String | 是    | 医生ID |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |



### 外来医院选项

```http
[GET]/outemr/out_pres/hospital_options
```

添加外来医院时，选择时用

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数


| 参数名  | 类型     | 必填   | 说明    |
| ---- | ------ | ---- | ----- |
| key  | String | 否    | 查询关键字 |


#### 回复报文参数ObjectList


| 参数名           | 类型     | 必填   | 说明   |
| ------------- | ------ | ---- | ---- |
| hospital_id   | String | 是    | 医院ID |
| hospital_name | String | 是    | 医院名称 |




### 外来医生选项

```http
[GET]/outemr/out_pres/doctor_options
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.5 | 新增   |


#### 请求报文参数


| 参数名  | 类型     | 必填   | 说明    |
| ---- | ------ | ---- | ----- |
| key  | String | 否    | 查询关键字 |

#### 回复报文参数ObjectList


| 参数名         | 类型     | 必填   | 说明   |
| ----------- | ------ | ---- | ---- |
| doctor_id   | String | 是    | 医生ID |
| doctor_name | String | 是    | 医生姓名 |


##验光记录新增


### 新增框架处方

```http
[POST]/outemr/out_pres/glasses_pres_save
```

#### 修改更新记录

| 对应业务   | 说明                                   |
| ------ | ------------------------------------ |
| V1.3.5 | 新增                                   |
| V1.3.8 | 外来处方的概念拓展为“新增处方”，新增处方包括“本院处方”和“外来处方” |


#### 请求报文参数ObjectList


| 参数名                   | 类型      | 必填   | 说明          |
| --------------------- | ------- | ---- | ----------- |
| pati_id               | String  | 是    | 患者id        |
| src                   | Integer | 否    | 来源 0本院1外来处方 |
| hospital_id           | String  | 否    | 医院ID        |
| doctor_id             | String  | 否    | 医生ID        |
| opto_far_pd           | String  | 否    | 瞳距-远用       |
| opto_near_pd          | String  | 否    | 瞳距-近用       |
| opto_od_pd            | String  | 否    | 瞳距-单眼OD     |
| opto_os_pd            | String  | 否    | 瞳距-单眼OS     |
| opto_od_ph            | String  | 否    | 瞳高-OD       |
| opto_os_ph            | String  | 否    | 瞳高-OS       |
| data_add              | String  | 否    | 近附加         |
| opto_far_od_sphere    | String  | 否    | 远用OD-球镜     |
| opto_far_od_cylinder  | String  | 否    | 远用OD-柱镜     |
| opto_far_od_axis      | String  | 否    | 远用OD-轴向     |
| opto_far_od_prism     | String  | 否    | 远用OD-棱镜     |
| opto_far_od_vision    | String  | 否    | 远用OD-视力     |
| opto_far_od_memo      | String  | 否    | 远用OD-备注     |
| opto_far_os_sphere    | String  | 否    | 远用OS-球镜     |
| opto_far_os_cylinder  | String  | 否    | 远用OS-柱镜     |
| opto_far_os_axis      | String  | 否    | 远用OS-轴向     |
| opto_far_os_prism     | String  | 否    | 远用OS-棱镜     |
| opto_far_os_vision    | String  | 否    | 远用OS-视力     |
| opto_far_os_memo      | String  | 否    | 远用OS-备注     |
| opto_near_od_sphere   | String  | 否    | 近用OD-球镜     |
| opto_near_od_cylinder | String  | 否    | 近用OD-柱镜     |
| opto_near_od_axis     | String  | 否    | 近用OD-轴向     |
| opto_near_od_prism    | String  | 否    | 近用OD-棱镜     |
| opto_near_od_vision   | String  | 否    | 近用OD-视力     |
| opto_near_od_memo     | String  | 否    | 近用OD-备注     |
| opto_near_os_sphere   | String  | 否    | 近用OS-球镜     |
| opto_near_os_cylinder | String  | 否    | 近用OS-柱镜     |
| opto_near_os_axis     | String  | 否    | 近用OS-轴向     |
| opto_near_os_prism    | String  | 否    | 近用OS-棱镜     |
| opto_near_os_vision   | String  | 否    | 近用OS-视力     |
| opto_near_os_memo     | String  | 否    | 近用OS-备注     |


#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明     |
| ------- | ------ | ---- | ------ |
| opto_id | String | 否    | 视光处方ID |


### 新增隐形处方

```http
[POST]/outemr/out_pres/contact_pres_save
```

#### 修改更新记录

| 对应业务   | 说明                                   |
| ------ | ------------------------------------ |
| V1.3.5 | 新增                                   |
| V1.3.8 | 外来处方的概念拓展为“新增处方”，新增处方包括“本院处方”和“外来处方” |


#### 请求报文参数ObjectList


| 参数名                   | 类型      | 必填   | 说明          |
| --------------------- | ------- | ---- | ----------- |
| pati_id               | String  | 是    | 患者id        |
| src                   | Integer | 否    | 来源 0本院1外来处方 |
| hospital_id           | String  | 否    | 医院ID        |
| doctor_id             | String  | 否    | 医生ID        |
| opto_lens_od_sphere   | String  | 否    | 隐形眼镜OD-球镜   |
| opto_lens_od_cylinder | String  | 否    | 隐形眼镜OD-柱镜   |
| opto_lens_od_axis     | String  | 否    | 隐形眼镜OD-轴向   |
| opto_lens_od_memo     | String  | 否    | 隐形眼镜OD-备注   |
| opto_lens_os_sphere   | String  | 否    | 隐形眼镜OS-球镜   |
| opto_lens_os_cylinder | String  | 否    | 隐形眼镜OS-柱镜   |
| opto_lens_os_axis     | String  | 否    | 隐形眼镜OS-轴向   |
| opto_lens_os_memo     | String  | 否    | 隐形眼镜OS-备注   |
| corneal_od_cliffy     | String  | 否    | 右眼陡峭        |
| corneal_od_flat       | String  | 否    | 右眼平坦        |
| corneal_od_axis       | String  | 否    | 右眼轴向        |
| corneal_os_cliffy     | String  | 否    | 左眼陡峭        |
| corneal_os_flat       | String  | 否    | 左眼平坦        |
| corneal_os_axis       | String  | 否    | 左眼轴向        |


#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明     |
| ------- | ------ | ---- | ------ |
| opto_id | String | 否    | 视光处方ID |



###新增训练仪器处方

```http
[POST]/outemr/out_pres/other_pres_save
```
也就是其他处方

#### 修改更新记录

| 对应业务   | 说明                                   |
| ------ | ------------------------------------ |
| V1.3.5 | 新增                                   |
| V1.3.8 | 外来处方的概念拓展为“新增处方”，新增处方包括“本院处方”和“外来处方” |


#### 请求报文参数ObjectList


| 参数名                     | 类型         | 必填   | 说明          |
| ----------------------- | ---------- | ---- | ----------- |
| pati_id                 | String     | 是    | 患者id        |
| src                     | Integer    | 否    | 来源 0本院1外来处方 |
| hospital_id             | String     | 否    | 医院ID        |
| doctor_id               | String     | 否    | 医生ID        |
| other_prescription_list | ObjectList | 否    | 其他处方列表      |

其他处方列表说明

| 参数名             | 类型     | 必填   | 说明     |
| --------------- | ------ | ---- | ------ |
| othe_clas_id    | String | 是    | 类别id   |
| othe_clas_code  | String | 是    | 商品类别代码 |
| othe_goods_id   | String | 是    | 商品id   |
| othe_count      | String | 是    | 数量     |
| othe_goods_unit | String | 否    | 单位     |
| othe_rem        | String | 否    | 备注     |


#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明     |
| ------- | ------ | ---- | ------ |
| opto_id | String | 否    | 视光处方ID |



### 新增OK镜处方

```http
[POST]/outemr/out_pres/ok_pres_save
```
也就是其他处方

#### 修改更新记录

| 对应业务   | 说明                                   |
| ------ | ------------------------------------ |
| V1.3.5 | 新增                                   |
| V1.3.8 | 外来处方的概念拓展为“新增处方”，新增处方包括“本院处方”和“外来处方” |


#### 请求报文参数ObjectList


| 参数名              | 类型         | 必填   | 说明               |
| ---------------- | ---------- | ---- | ---------------- |
| pati_id          | String     | 是    | 患者id             |
| src              | Integer    | 否    | 来源 0本院1外来处方      |
| hospital_id      | String     | 否    | 医院ID             |
| doctor_id        | String     | 否    | 医生ID             |
| orth_od_brand_id | String     | 否    | OD-品牌id，右眼镜片品牌id |
| orth_od_brand    | String     | 否    | OD-品牌，右眼镜片品牌名称   |
| orth_od_rem      | String     | 否    | OD-备注            |
| orth_od_paras    | ObjectList | 否    | OD-属性列表          |
| orth_os_brand_id | String     | 否    | OS-品牌id，左眼镜片品牌id |
| orth_os_brand    | String     | 否    | OS-品牌，左眼镜片品牌名称   |
| orth_os_rem      | String     | 否    | OS-备注            |
| orth_os_paras    | ObjectList | 否    | OS-属性列表          |


OD-属性列表(orth_od_paras)和OS-属性列表(orth_os_paras) 说明

| 参数名            | 类型     | 必填   | 说明    |
| -------------- | ------ | ---- | ----- |
| para_prop_id   | String | 是    | 属性码ID |
| para_prop_name | String | 是    | 属性值名称 |
| para_choi_id   | String | 否    | 属性值ID |
| para_choi_code | String | 否    | 属性值代码 |
| para_value     | String | 否    | 属性值   |


#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明     |
| ------- | ------ | ---- | ------ |
| opto_id | String | 否    | 视光处方ID |


### 新增rgp镜处方

```http
[POST]/outemr/out_pres/rgp_pres_save
```
也就是其他处方

#### 修改更新记录

| 对应业务   | 说明                                   |
| ------ | ------------------------------------ |
| V1.3.5 | 新增                                   |
| V1.3.8 | 外来处方的概念拓展为“新增处方”，新增处方包括“本院处方”和“外来处方” |


#### 请求报文参数ObjectList


| 参数名                | 类型      | 必填   | 说明          |
| ------------------ | ------- | ---- | ----------- |
| pati_id            | String  | 是    | 患者id        |
| src                | Integer | 否    | 来源 0本院1外来处方 |
| hospital_id        | String  | 否    | 医院ID        |
| doctor_id          | String  | 否    | 医生ID        |
| rgp_od_brand_id    | String  | 否    | OD-品牌id     |
| rgp_od_brand       | String  | 否    | OD-品牌       |
| rgp_od_material_id | String  | 否    | OD-材质id     |
| rgp_od_material    | String  | 否    | OD-材质       |
| rgp_od_curve       | String  | 否    | OD-基弧1      |
| rgp_od_curve2      | String  | 否    | OD-基弧2      |
| rgp_od_diameter    | String  | 否    | OD-直径       |
| rgp_od_degree      | String  | 否    | OD-度数1      |
| rgp_od_degree2     | String  | 否    | OD-度数2      |
| rgp_od_rem         | String  | 否    | OD-备注       |
| rgp_os_brand_id    | String  | 否    | OS-品牌id     |
| rgp_os_brand       | String  | 否    | OS-品牌       |
| rgp_os_material_id | String  | 否    | OS-材质id     |
| rgp_os_material    | String  | 否    | OS-材质       |
| rgp_os_curve       | String  | 否    | OS-基弧1      |
| rgp_os_curve2      | String  | 否    | OS-基弧2      |
| rgp_os_diameter    | String  | 否    | OS-直径       |
| rgp_os_degree      | String  | 否    | OS-度数1      |
| rgp_os_degree2     | String  | 否    | OS-度数2      |
| rgp_os_rem         | String  | 否    | OD-备注       |

#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明     |
| ------- | ------ | ---- | ------ |
| opto_id | String | 否    | 视光处方ID |


## 眼健康体检报告


```
[GET]/outemr/eyes_health/examination/report
```

### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.5 | 新增   |

#### 说明

**协议中的字段均可能为空，请根据业务需求操作**

### 请求报文参数

| 参数名     | 类型     | 必填   | 说明   |
| ------- | ------ | ---- | ---- |
| trea_id | String | 是    | 就诊ID |

### 回复报文参数(Object)

| 参数名                     | 类型     | 必填   | 说明         |
| ----------------------- | ------ | ---- | ---------- |
| basic_info              | Object | 否    | 基本信息       |
| visit_record            | Object | 否    | 就诊记录       |
| basic_inspection        | Object | 否    | 基础检查       |
| dioptroscopy_inspection | Object | 否    | 屈光检查       |
| eyes_health             | Object | 否    | 眼健康检查      |
| oblique_amblyopia       | Object | 否    | 斜弱视        |
| binocular_visual        | Object | 否    | 双眼视功能      |
| contact_lens_first_rgp  | Object | 否    | 接触镜首诊(RGP) |
| contact_lens_visit_rgp  | Object | 否    | 接触镜复查(RGP) |
| contact_lens_first_ok   | Object | 否    | 接触镜首诊(OK)  |
| contact_lens_visit_ok   | Object | 否    | 接触镜复查(OK)  |
| Diagnosis_suggestion    | Object | 否    | 诊断与建议      |

#### 基本信息(Object)  adm_patient

| 参数名           | 类型      | 必填   | 说明                       |
| ------------- | ------- | ---- | ------------------------ |
| pati_name     | String  | 是    | 患者姓名                     |
| pati_gender   | Integer | 是    | 患者性别 0-未知;1-男;2-女;9-未规定项 |
| pati_birthday | String  | 是    | 出生日期：yyyy-MM-dd          |
| pati_phone    | String  | 是    | 联系电话                     |
| pati_address  | String  | 是    | 联系地址或单位                  |
| visi_no       | Long    | 是    | 患者编号                     |
| visi_time     | String  | 是    | 就诊日期:yyyy-MM-dd HH:mm    |

#### 就诊记录(Object) 

| 参数名             | 类型      | 必填   | 说明              |
| --------------- | ------- | ---- | --------------- |
| visi_type       | Integer | 是    | 就诊类别: 1:初诊；2：复诊 |
| visi_item       | String  | 是    | 就诊事项            |
| comp_content    | String  | 是    | 主诉              |
| illn_content    | String  | 是    | 现病史             |
| past_content    | String  | 是    | 既往史             |
| glasses_content | String  | 是    | 戴镜史             |

#### 基础检查(Object)

| 参数名                                   | 类型     | 必填   | 说明           |
| ------------------------------------- | ------ | ---- | ------------ |
| data_od_distance_vision               | String | 否    | 裸眼远用OD-视力    |
| data_os_distance_vision               | String | 否    | 裸眼远用OS-视力    |
| data_ou_distance_vision               | String | 否    | 裸眼远用OU-视力    |
| data_distance_vision_rem              | String | 否    | 裸眼远用视力备注     |
| data_distance_create_doctor           | String | 是    | 裸眼远用录入人      |
| data_od_near_vision                   | String | 否    | 裸眼近用OD-视力    |
| data_os_near_vision                   | String | 否    | 裸眼近用OS-视力    |
| data_ou_near_vision                   | String | 否    | 裸眼近用OU-视力    |
| data_near_vision_rem                  | String | 否    | 裸眼近用视力备注     |
| data_near_create_doctor               | String | 是    | 裸眼近用录入人      |
| data_od_distance_original             | String | 否    | 原镜远用OD-视力    |
| data_os_distance_original             | String | 否    | 原镜远用OS-视力    |
| data_ou_distance_original             | String | 否    | 原镜远用OU-视力    |
| data_distance_original_rem            | String | 否    | 原镜远用视力备注     |
| data_distance_original_create_doctor  | String | 是    | 原镜远用录入人      |
| data_od_near_original                 | String | 否    | 原镜近用OD-视力    |
| data_os_near_original                 | String | 否    | 原镜近用OS-视力    |
| data_ou_near_original                 | String | 否    | 原镜近用OU-视力    |
| data_near_original_rem                | String | 否    | 原镜近用视力备注     |
| data_near_original_create_doctor      | String | 是    | 原镜近用录入人      |
| original_glasses_od                   | String | 否    | 原镜度数OD       |
| original_glasses_os                   | String | 否    | 原镜度数OS       |
| original_glasses_create_doctor        | String | 否    | 原镜度数录入人      |
| data_add                              | String | 否    | 近附加          |
| data_add_create_doctor                | String | 是    | 近附加数据录入人     |
| pupil_light_reflection                | String | 是    | 瞳孔对光反射       |
| pupil_light_reflection_create_doctor  | String | 是    | 瞳孔对光反射录入人    |
| corneal_light_ht                      | String | 是    | 角膜映光点（HT）    |
| corneal_light_create_doctor           | String | 是    | 角膜映光点（HT）    |
| accommodative_esotropia               | String | 是    | 调节视标诱发内斜视    |
| accommodative_esotropia_create_doctor | String | 是    | 调节视标诱发内斜视录入人 |
| cover_test_ct                         | String | 是    | 遮盖实验         |
| cover_test_ct_create_doctor           | String | 是    | 遮盖实验录入人      |
| eye_movement                          | String | 是    | 眼球运动         |
| eye_movemen_create_doctor             | String | 是    | 眼球运动录入人      |
| near_point                            | String | 是    | 集合近点         |
| near_point_create_doctor              | String | 是    | 集合近点录入人      |
| adjust_amplitude                      | String | 是    | 调节幅度         |
| adjust_amplitude_create_doctor        | String | 是    | 调节幅度录入人      |
| data_od_iop                           | String | 否    | OD-眼压        |
| data_os_iop                           | String | 否    | OS-眼压        |
| data_iop_create_doctor                | String | 否    | 眼压录入人        |
| data_od_axis                          | String | 12   | 否            |
| data_os_axis                          | String | 12   | 否            |
| data_axis                             | String | 12   | 否            |
| nystagmus_data                        | String | 否    | 眼球震颤状态       |
| nystagmus_data_create_doctor          | String | 否    | 眼球震颤状态录入人    |
| remark                                | String | 是    | 其他说明         |

#### 屈光检查(Object)

| 参数名                                   | 类型         | 必填   | 说明         |
| ------------------------------------- | ---------- | ---- | ---------- |
| optometry_od_data                     | String     | 是    | 电脑验光OD     |
| optometry_os_data                     | String     | 是    | 电脑验光OS     |
| optometry_create_doctor               | String     | 是    | 电脑验光录入人    |
| subjective_od                         | String     | 否    | 主觉验光OD     |
| subjective_os                         | String     | 否    | 主觉验光OS     |
| subjective_create_doctor              | String     | 否    | 主觉验光录入人    |
| retinoscopy_od                        | String     | 否    | 检影验光OD     |
| retinoscopy_os                        | String     | 否    | 检影验光OS     |
| retinoscopy_create_doctor             | String     | 否    | 检影验光录入人    |
| optometry_cycloplegic_od_data         | String     | 是    | 电脑验光睫麻后OD  |
| optometry_cycloplegic_os_data         | String     | 是    | 电脑验光睫麻后OS  |
| optometry_cycloplegic_create_doctor   | String     | 是    | 电脑验光睫麻后录入人 |
| subjective_cycloplegic_od             | String     | 否    | 主觉验光睫麻后OD  |
| subjective_cycloplegic_os             | String     | 否    | 主觉验光睫麻后OS  |
| subjective_cycloplegic_create_doctor  | String     | 否    | 主觉验光睫麻后录入人 |
| retinoscopy_cycloplegic_od            | String     | 否    | 检影验光睫麻后OD  |
| retinoscopy_cycloplegic_os            | String     | 否    | 检影验光睫麻后OS  |
| retinoscopy_cycloplegic_create_doctor | String     | 否    | 检影验光睫麻后录入人 |
| data_add                              | String     | 否    | 近附加        |
| data_add_create_doctor                | String     | 是    | 近附加数据录入人   |
| opto_od_ph                            | String     | 是    | 瞳高-OD      |
| opto_os_ph                            | String     | 是    | 瞳高-OS      |
| opto_ph_create_doctor                 | String     | 是    | 瞳高录入人      |
| opto_pd_data                          | String     | 是    | 瞳距数据       |
| opto_pd_create_doctor                 | String     | 是    | 瞳距录入人      |
| prescription_distance_od              | String     | 是    | 远用处方OD     |
| prescription_distance_os              | String     | 是    | 远用处方OS     |
| prescription_distance_create_doctor   | String     | 是    | 远用处方录入人    |
| prescription_near_od                  | String     | 是    | 近用处方OD     |
| prescription_near_os                  | String     | 是    | 近用处方OS     |
| prescription_near_create_doctor       | String     | 是    | 近用处方录入人    |
| contact_lenses_od                     | String     | 是    | 隐形眼镜OD     |
| contact_lenses_os                     | String     | 是    | 隐形眼镜OS     |
| contact_lenses_create_doctor          | String     | 是    | 隐形眼镜录入人    |
| corneal_curvature_od                  | String     | 否    | 角膜曲率OD     |
| corneal_curvature_os                  | String     | 否    | 角膜曲率OS     |
| corneal_curvature_create_doctor       | String     | 否    | 角膜曲率录入人    |
| remarks                               | String     | 是    | 其他说明       |
| training_instrument_list              | ObjectList | 否    | 训练仪器列表     |

##### 训练仪器列表(Object)

| 参数名                | 类型     | 必填   | 说明              |
| ------------------ | ------ | ---- | --------------- |
| data_create_doctor | String | 否    | 数据录入人           |
| othe_id            | String | 否    | 其他处方处方id（无代表新增） |
| othe_clas_id       | String | 是    | 类别id            |
| othe_clas_code     | String | 是    | 商品类别代码          |
| othe_goods_id      | String | 是    | 商品id            |
| othe_count         | String | 是    | 数量              |
| othe_goods_unit    | String | 否    | 单位              |
| othe_rem           | String | 否    | 备注              |

#### 眼健康检查(Object)

| 参数名                     | 类型     | 必填   | 说明                    |
| ----------------------- | ------ | ---- | --------------------- |
| data_create_doctor      | String | 否    | 数据录入人                 |
| --模板数据(template_data)-- | Object |      |                       |
| 裂隙灯检查                   |        |      |                       |
| od_eyelid               | String | 否    | 眼睑od:常规时默认:无倒睫，眼睑闭合完全 |
| os_eyelid               | String | 否    | 眼睑os:常规时默认:无倒睫，眼睑闭合完全 |
| od_tears                | String | 否    | 泪器od:常规时默认:泪点位正       |
| os_tears                | String | 否    | 泪器os:常规时默认:泪点位正       |
| od_conjunctiva          | String | 否    | 结膜od:常规时默认:无充血、水肿     |
| os_conjunctiva          | String | 否    | 结膜os:常规时默认:无充血、水肿     |
| od_cornea               | String | 否    | 角膜od:常规时默认:透明         |
| os_cornea               | String | 否    | 角膜os:常规时默认:透明         |
| od_chamber              | String | 否    | 前房od:常规时默认:清、深        |
| os_chamber              | String | 否    | 前房os:常规时默认:清、深        |
| od_lris                 | String | 否    | 虹膜od:常规时默认:纹理清        |
| os_lris                 | String | 否    | 虹膜os:常规时默认:纹理清        |
| od_pupil                | String | 否    | 瞳孔od:常规时默认:PERRL      |
| os_pupil                | String | 否    | 瞳孔os:常规时默认:PERRL      |
| od_crystal              | String | 否    | 晶体od:常规时默认:透明         |
| os_crystal              | String | 否    | 晶体os:常规时默认:透明         |
| od_vitreous             | String | 否    | 玻璃体od:常规时默认:无混浊       |
| os_vitreous             | String | 否    | 玻璃体os:常规时默认:无混浊       |
| slit_lamp_od_other      | String | 否    | 其它od                  |
| slit_lamp_os_other      | String | 否    | 其它os                  |
| 眼底镜检查                   |        |      |                       |
| od_disk                 | String | 否    | 视盘OD:常规时默认:色红界清       |
| os_disk                 | String | 否    | 视盘OS:常规时默认:色红界清       |
| od_cd                   | String | 否    | C/D OD:常规时默认:约0.3     |
| os_cd                   | String | 否    | C/D OS:常规时默认:约0.3     |
| od_macular              | String | 否    | 黄斑OD:常规时默认:中心凹反光可见    |
| os_macular              | String | 否    | 黄斑OS:常规时默认:中心凹反光可见    |
| eye_mirror_od_other     | String | 否    | 其它OD                  |
| eye_mirror_os_other     | String | 否    | 其它OS                  |

#### 斜弱视(Object)

| 参数名                                 | 类型      | 必填   | 说明                                       |
| ----------------------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor                  | String  | 否    | 数据录入人                                    |
| 基础检查通用数据baseline_exam               |         |      | 基础检查通用数据表                                |
| base_ht_horizontal                  | String  | 否    | 角膜映光点-水平                                 |
| base_ht_vertical_type               | Integer | 是    | 角膜映光点-垂直方向:<br/>1-R/L;<br/>2-L/R         |
| base_ht_vertical                    | String  | 否    | 角膜映光点-垂直                                 |
| base_npc_ttn                        | Integer | 否    | 集合近点-TTN;to the nose;0:未选中（破裂点、恢复点可编辑）；1:选中; |
| base_npc_break                      | String  | 否    | 集合近点-破裂点                                 |
| base_npc_restore                    | String  | 否    | 集合近点-恢复点                                 |
| base_amp_type                       | Integer | 是    | 调节幅度-方法:<br/>1-移近法;<br/>2-负镜片法;<br/>3-移近/移远法 |
| base_amp_od_cm                      | String  | 否    | 调节幅度-OD                                  |
| base_amp_od                         | String  | 否    | 调节幅度-OD                                  |
| base_amp_os_cm                      | String  | 否    | 调节幅度-OS                                  |
| base_amp_os                         | String  | 否    | 调节幅度-OS                                  |
| base_amp_ou_cm                      | String  | 否    | 调节幅度-OU                                  |
| base_amp_ou                         | String  | 否    | 调节幅度-OU                                  |
| 模板数据template_data                   |         |      | 模板数据                                     |
| ref5m_degrees_sc                    | String  | 否    | 遮盖试验+三棱镜REF远距离棱镜度SC                      |
| ref5m_vertical_sc_type              | Integer | 否    | 遮盖试验+三棱镜REF远距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| ref5m_vertical_sc                   | String  | 否    | 遮盖试验+三棱镜REF远距离垂直SC                       |
| ref5m_degrees_cc                    | String  | 否    | 遮盖试验+三棱镜REF远距离棱镜度CC                      |
| ref5m_vertical_cc_type              | Integer | 否    | 遮盖试验+三棱镜REF远距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| ref5m_vertical_cc                   | String  | 否    | 遮盖试验+三棱镜REF远距离垂直CC                       |
| ref33cm_degrees_sc                  | String  | 否    | 遮盖试验+三棱镜REF近距离棱镜度SC                      |
| ref33cm_vertical_sc_type            | Integer | 否    | 遮盖试验+三棱镜REF近距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| ref33cm_vertical_sc                 | String  | 否    | 遮盖试验+三棱镜REF近距离垂直SC                       |
| ref33cm_degrees_cc                  | String  | 否    | 遮盖试验+三棱镜REF近距离棱镜度CC                      |
| ref33cm_vertical_cc_type            | Integer | 否    | 遮盖试验+三棱镜REF近距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| ref33cm_vertical_cc                 | String  | 否    | 遮盖试验+三棱镜REF近距离垂直CC                       |
| lef5m_degrees_sc                    | String  | 否    | 遮盖试验+三棱镜LEF远距离棱镜度SC                      |
| prism_lef5m_vertical_sc_type        | Integer | 否    | 遮盖试验+三棱镜LEF远距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| prism_lef5m_vertical_sc             | String  | 否    | 遮盖试验+三棱镜LEF远距离垂直SC                       |
| lef5m_degrees_cc                    | String  | 否    | 遮盖试验+三棱镜LEF远距离棱镜度CC                      |
| prism_lef5m_vertical_cc_type        | Integer | 否    | 遮盖试验+三棱镜LEF远距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| prism_lef5m_vertical_cc             | String  | 否    | 遮盖试验+三棱镜LEF远距离垂直CC                       |
| lef33cm_degrees_sc                  | String  | 否    | 遮盖试验+三棱镜LEF近距离棱镜度SC                      |
| lef33cm_vertical_sc_type            | Integer | 否    | 遮盖试验+三棱镜LEF近距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| lef33cm_vertical_sc                 | String  | 否    | 遮盖试验+三棱镜LEF近距离垂直SC                       |
| lef33cm_degrees_cc                  | String  | 否    | 遮盖试验+三棱镜LEF近距离棱镜度CC                      |
| lef33cm_vertical_cc_type            | Integer | 否    | 遮盖试验+三棱镜LEF近距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| lef33cm_vertical_cc                 | String  | 否    | 遮盖试验+三棱镜LEF近距离垂直CC                       |
| 马氏杆+三棱镜                             |         |      |                                          |
| maddox_ref5m_degrees_sc             | String  | 否    | 马氏杆+三棱镜REF远距离棱镜度SC                       |
| maddox_ref5m_vertical_sc_type       | Integer | 否    | 马氏杆+三棱镜REF远距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| maddox_ref5m_vertical_sc            | String  | 否    | 马氏杆+三棱镜REF远距离垂直SC                        |
| maddox_ref5m_degrees_cc             | String  | 否    | 马氏杆+三棱镜REF远距离棱镜度CC                       |
| maddox_ref5m_vertical_cc_type       | Integer | 否    | 马氏杆+三棱镜REF远距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| maddox_ref5m_vertical_cc            | String  | 否    | 马氏杆+三棱镜REF远距离垂直CC                        |
| maddox_ref33cm_degrees_sc           | String  | 否    | 马氏杆+三棱镜REF近距离棱镜度SC                       |
| maddox_ref33cm_vertical_sc_type     | Integer | 否    | 马氏杆+三棱镜REF近距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| maddox_ref33cm_vertical_sc          | String  | 否    | 马氏杆+三棱镜REF近距离垂直SC                        |
| maddox_ref33cm_degrees_cc           | String  | 否    | 马氏杆+三棱镜REF近距离棱镜度CC                       |
| maddox_ref33cm_vertical_cc_type     | Integer | 否    | 马氏杆+三棱镜REF近距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| maddox_ref33cm_vertical_cc          | String  | 否    | 马氏杆+三棱镜REF近距离垂直CC                        |
| maddox_lef5m_degrees_sc             | String  | 否    | 马氏杆+三棱镜LEF远距离棱镜度SC                       |
| maddox_prism_lef5m_vertical_sc_type | Integer | 否    | 马氏杆+三棱镜LEF远距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| maddox_prism_lef5m_vertical_sc      | String  | 否    | 马氏杆+三棱镜LEF远距离垂直SC                        |
| maddox_lef5m_degrees_cc             | String  | 否    | 马氏杆+三棱镜LEF远距离棱镜度CC                       |
| maddox_prism_lef5m_vertical_cc_type | Integer | 否    | 马氏杆+三棱镜LEF远距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| maddox_prism_lef5m_vertical_cc      | String  | 否    | 马氏杆+三棱镜LEF远距离垂直CC                        |
| maddox_lef33cm_degrees_sc           | String  | 否    | 马氏杆+三棱镜LEF近距离棱镜度SC                       |
| maddox_lef33cm_vertical_sc_type     | Integer | 否    | 马氏杆+三棱镜LEF近距离垂直类型SC:<br/>1-R/L;<br/>2-L/R |
| maddox_lef33cm_vertical_sc          | String  | 否    | 马氏杆+三棱镜LEF近距离垂直SC                        |
| maddox_lef33cm_degrees_cc           | String  | 否    | 马氏杆+三棱镜LEF近距离棱镜度CC                       |
| maddox_lef33cm_vertical_cc_type     | Integer | 否    | 马氏杆+三棱镜LEF近距离垂直类型CC:<br/>1-R/L;<br/>2-L/R |
| maddox_lef33cm_vertical_cc          | String  | 否    | 马氏杆+三棱镜LEF近距离垂直CC                        |
| eye_movement_double_safe            | Integer | 否    | 双眼运动安全:<br/>1-SAFE;<br/>2-异常             |
| eye_movement_double_od1             | String  | 否    | 双眼运动OD第一级别(从上到下，从左到右)                    |
| eye_movement_double_od2             | String  | 否    | 双眼运动OD第二级别(从上到下，从左到右)                    |
| eye_movement_double_od3             | String  | 否    | 双眼运动OD第三级别(从上到下，从左到右)                    |
| eye_movement_double_od4             | String  | 否    | 双眼运动OD第四级别(从上到下，从左到右)                    |
| eye_movement_double_od5             | String  | 否    | 双眼运动OD第五级别(从上到下，从左到右)                    |
| eye_movement_double_od6             | String  | 否    | 双眼运动OD第六级别(从上到下，从左到右)                    |
| eye_movement_double_os1             | String  | 否    | 双眼运动OS第一级别(从上到下，从左到右)                    |
| eye_movement_double_os2             | String  | 否    | 双眼运动OS第二级别(从上到下，从左到右)                    |
| eye_movement_double_os3             | String  | 否    | 双眼运动OS第三级别(从上到下，从左到右)                    |
| eye_movement_double_os4             | String  | 否    | 双眼运动OS第四级别(从上到下，从左到右)                    |
| eye_movement_double_os5             | String  | 否    | 双眼运动OS第五级别(从上到下，从左到右)                    |
| eye_movement_double_os6             | String  | 否    | 双眼运动OS第六级别(从上到下，从左到右)                    |
| eye_movement_double_a               | Integer | 否    | 双眼运动A征:<br/>1-阴性(-);<br/>2-阳性(+)         |
| eye_movement_double_v               | Integer | 否    | 双眼运动V征:<br/>1-阴性(-);<br/>2-阳性(+)         |
| eye_movement_single_od              | String  | 否    | 单眼运动OD                                   |
| eye_movement_single_os              | String  | 否    | 单眼运动OS                                   |
| tilted_head_status                  | Integer | 否    | 歪头试验状态:<br/>1-阴性(-);<br/>2-阳性(+)         |
| tilted_head_positive                | String  | 否    | 歪头试验阳性特征:<br/>1-头向右肩部偏斜R/L;<br/>1-头向右肩部偏斜L/R;<br/>1-头向左肩部偏斜R/L;<br/>1-头向左肩部偏斜L/R; |
| compensation_head_status            | Integer | 否    | 代偿头位状态:<br/>1-不存在;<br/>2-存在              |
| compensation_head_face              | String  | 否    | 代偿头位面部位置:<br/>1-面部正位;<br/>2-面部左边转;<br/>3-面部右边转; |
| compensation_head_head              | String  | 否    | 代偿头位头部位置:<br/>1-头部正位;<br/>2-头部向右肩倾斜;<br/>3-头部向左肩倾斜; |
| compensation_head_jaw               | String  | 否    | 代偿头位下巴位置:<br/>1-下巴正位;<br/>2-下巴上抬;<br/>3-下巴内收; |
| nystagmus_status                    | Integer | 否    | 眼球震颤状态:<br/>1-否;<br/>2-是                 |
| nystagmus_middle_status             | Integer | 否    | 眼球震颤中间带状态:<br/>1-不存在;<br/>2-存在           |
| nystagmus_middle_face               | String  | 否    | 眼球震颤中间带面部朝向:<br/>1-面向正前方;<br/>2-面向左前方;<br/>3-面向右前方; |
| nystagmus_middle_head               | String  | 否    | 眼球震颤中间带头部位置:<br/>1-头部正位;<br/>2-头部向右肩倾斜;<br/>3-头部向左肩倾斜; |
| nystagmus_middle_jaw                | String  | 否    | 眼球震颤中间带下巴位置:<br/>1-下巴正位;<br/>2-下巴上抬;<br/>3-下巴内收; |
| nystagmus_value                     | String  | 否    | 眼震值                                      |
| nystagmus_nature                    | Integer | 否    | 震颤性质:<br/>1-冲动型;<br/>2-钟摆型;              |
| nystagmus_ direction                | Integer | 否    | 震颤方向:<br/>1-水平;<br/>2-垂直;<br/>3-旋转;<br/>3-混合; |
| remarks                             | String  | 否    | 其他说明                                     |

##### 专科检查信息项列表说明

| 参数名        | 类型     | 必填   | 说明        |
| ---------- | ------ | ---- | --------- |
| item_id    | Long   | 是    | 专科检查信息项id |
| item_key   | String | 是    | 项关键词      |
| item_value | String | 否    | 数据项内容     |
| parent_id  | Long   | 否    | 父项ID      |

#### 双眼视功能(Object)

| 参数名                           | 类型      | 必填   | 说明                                       |
| ----------------------------- | ------- | ---- | ---------------------------------------- |
| is_first_follow               | Integer | 是    | 1-首诊;2-随访;                               |
| follow_up_time                | Integer | 否    | 双眼视随访时间选项:1-一周;2-1月;3-3月;4-6月;5-12月;6-不定期; |
| personal_visit_history        | Object  | 否    | 个人史                                      |
| refraction_check              | Object  | 否    | 眼屈光检查                                    |
| visual_function_test          | Object  | 否    | 视功能检查                                    |
| diagnose_text                 | String  | 否    | 诊断                                       |
| refractive_correction_program | String  | 否    | 屈光矫正方案:1-双光镜;2-渐变镜;3-RGP;4-OK镜;5-棱镜;6-普通单光镜;多个使用逗号分隔。 |
| training_program              | String  | 否    | 训练方案:<br/>1-弱视训练;<br/>2-调节训练;<br/>3-辐辏训练;<br/>4-眼球运动训练;多个使用逗号分隔。 |

##### 视功能检查详情

| 参数名                                  | 类型     | 必填   | 说明              |
| ------------------------------------ | ------ | ---- | --------------- |
| data_create_doctor                   | String | 否    | 数据录入人           |
| adjust_amplitude                     | String | 是    | 调节幅度            |
| adjust_flexibility                   | String | 是    | 调节灵活度           |
| adjust_status                        | String | 是    | 调节状态            |
| nra_pra                              | String | 否    | NRA/PRA         |
| near_point                           | String | 否    | 辐辏近点            |
| coverage_test_distance               | String | 否    | 遮盖实验远距          |
| coverage_test_near                   | String | 否    | 遮盖实验近距          |
| horizontal_oblique_quantity_distance | String | 否    | 水平隐斜量远距         |
| horizontal_oblique_quantity_near     | String | 否    | 水平隐斜量近距         |
| vertical_gradient_distance           | String | 否    | 垂直隐斜量远距         |
| vertical_gradient_near               | String | 否    | 垂直隐斜量近距         |
| ac_a_distance_left                   | String | 否    | AC/A(△/D)远距-阶梯法 |
| ac_a_near_left                       | String | 否    | AC/A(△/D)近距-计算法 |
| worth_distance                       | String | 否    | Worth 4 dot远距   |
| worth_near                           | String | 否    | Worth 4 dot近距   |
| bi_bo_distance                       | String | 否    | BI/Bo远距         |
| bi_bo_near                           | String | 否    | BI/Bo近距         |
| flexibility_distance                 | String | 否    | 聚散灵活度(CPM)远距    |
| flexibility_near                     | String | 否    | 聚散灵活度(CPM)近距    |
| stereoscopic_vision_distance         | String | 否    | 立体视觉远距          |
| stereoscopic_vision_near             | String | 否    | 立体视觉近距          |

##### 个人史详情

| 参数名                    | 类型      | 必填   | 说明                                       |
| ---------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor     | String  | 否    | 数据录入人                                    |
| history_diagnosis      | Integer | 否    | 医疗诊治史:1-正常;2-有;                          |
| history_diagnosis_list | String  | 否    | 医疗诊治史列表:1-过敏史;2-鼻窦炎;3-枯草热;4-眼、口或粘膜干燥症;5-抽搐或癫痫;6-昏厥;7-糖尿病;8-怀孕;9-甲状腺功能异常;10-精神治疗史;多个使用逗号分隔。 |
| visual_training        | Integer | 否    | 是否接受过视觉训练:1-无;2-有;                       |
| visual_training_time   | String  | 否    | 视觉训练时间，单位周                               |
| is_squint_correction   | Integer | 否    | 是否斜视矫正术后:<br/>1-否;<br/>2-有;              |
| squint_correction      | String  | 否    | 斜视矫正术后情况:<br/>1-间接性外斜视矫正术后;<br/>2-恒定性外斜视矫正术后;<br/>3-急性共同性内科视矫正术后;<br/>4-部分调节性内斜视矫正术后;<br/>5-麻痹性斜视矫正术后;<br/>多个使用逗号分隔。 |

##### 眼屈光检查详情

| 参数名                       | 类型     | 必填   | 说明             |
| ------------------------- | ------ | ---- | -------------- |
| data_create_doctor        | String | 否    | 数据录入人          |
| data_od_distance_vision   | String | 否    | 远用OD-视力        |
| data_os_distance_vision   | String | 否    | 远用OS-视力        |
| data_od_near_vision       | String | 否    | 近用OD-视力        |
| data_os_near_vision       | String | 否    | 近用OS-视力        |
| primary_prescription_od   | String | 否    | 原镜处方OD         |
| primary_prescription_os   | String | 否    | 原镜处方OS         |
| subjective_od             | String | 否    | 主觉验光OD         |
| subjective_os             | String | 否    | 主觉验光OS         |
| anterior_segment_check_od | String | 否    | 眼前节检查OD        |
| anterior_segment_check_os | String | 否    | 眼前节检查OS        |
| fundus_examination_od     | String | 否    | 眼底检查OD         |
| fundus_examination_os     | String | 否    | 眼底检查OS         |
| dominant_eye              | String | 否    | 优势眼:1-OD;2-OS; |
| opto_pd_data              | String | 否    | 瞳距             |
| remark                    | String | 否    | 其他说明           |

#### 接触镜首诊(Object)

| 参数名                        | 类型      | 必填   | 说明                                       |
| -------------------------- | ------- | ---- | ---------------------------------------- |
| glasses_need               | String  | 是    | 戴镜需求:1-化妆品;2-框架眼镜配戴不方便;3-运动及娱乐;4-职业;5-高度屈光不正;6-度数增加;7-散光;8-屈光参差;9-无晶体眼;10-圆锥角膜;多选使用逗号分隔。 |
| glasses_need_create_doctor | String  | 是    | 戴镜需求录入人                                  |
| eyes_exam_before_glasses   | Object  | 是    | 戴镜前眼部检查                                  |
| eyes_slit_lamp_check       | Object  | 是    | 眼部裂隙灯检查                                  |
| fundus_examination         | Object  | 是    | 眼底检查                                     |
| try_index                  | Integer | 否    | 试戴次数                                     |
| try_index_create_doctor    | String  | 否    | 试戴次数录入人                                  |
| try_infos                  | Object  | 否    | 试戴情况                                     |
| mirror_prescription        | Object  | 否    | 配镜处方                                     |

##### 配镜处方详情

| 参数名                       | 类型     | 必填   | 说明          |
| ------------------------- | ------ | ---- | ----------- |
| data_create_doctor        | String | 否    | 数据录入人       |
| final_prescription_1st_od | String | 否    | 最终处方（1st）OD |
| final_prescription_1st_os | String | 否    | 最终处方（1st）OS |
| final_prescription_2nd_od | String | 否    | 最终处方（2nd）OD |
| final_prescription_2nd_os | String | 否    | 最终处方（2nd）OS |

##### 眼底检查详情

| 参数名                | 类型     | 必填   | 说明                       |
| ------------------ | ------ | ---- | ------------------------ |
| data_create_doctor | String | 否    | 数据录入人                    |
| disk_od            | String | 否    | 眼底检查-视盘od;常规时默认为：透明、无混浊  |
| cd_od              | String | 否    | 眼底检查-C/D od;常规时默认为：0.3   |
| rim_od             | String | 否    | 眼底检查-盘沿od;常规时默认为：粉红色、清   |
| peripheral_od      | String | 否    | 眼底检查-外周od;常规时默认为：清晰      |
| av_od              | String | 否    | 眼底检查-A/V od;常规时默认为：2:3   |
| macular_od         | String | 否    | 眼底检查-黄斑od;常规时默认为：中心凹反光可见 |
| disk_os            | String | 否    | 眼底检查-视盘od;常规时默认为：透明、无混浊  |
| cd_os              | String | 否    | 眼底检查-C/D os;常规时默认为：0.3   |
| rim_os             | String | 否    | 眼底检查-盘沿os;常规时默认为：粉红色、清   |
| peripheral_os      | String | 否    | 眼底检查-外周os;常规时默认为：清晰      |
| av_os              | String | 否    | 眼底检查-A/V os;常规时默认为：2:3   |
| macular_os         | String | 否    | 眼底检查-黄斑os;常规时默认为：中心凹反光可见 |

##### 眼部裂隙灯检查详情

| 参数名                              | 类型      | 必填   | 说明                                       |
| -------------------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor               | String  | 否    | 数据录入人                                    |
| epithelial_edema_od              | Integer | 否    | 眼部裂隙灯检查-上皮水肿od;<br/>0;<br/>1;<br/>2;<br/>3; |
| micro_capsule_od                 | Integer | 否    | 眼部裂隙灯检查-微囊od;<br/>0;<br/>1;<br/>2;<br/>3; |
| dyed_cornea_od                   | Integer | 否    | 眼部裂隙灯检查-角膜点染od;<br/>0;<br/>1;<br/>2;<br/>3; |
| three_nine_cornea_od             | Integer | 否    | 眼部裂隙灯检查-3、9点染od;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_stroma_od                | Integer | 否    | 眼部裂隙灯检查-角膜基质od;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_neovascularization_od    | Integer | 否    | 眼部裂隙灯检查-角膜新生血管od;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_hyperemia_od             | Integer | 否    | 眼部裂隙灯检查-角膜缘充血od;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctiva_hyperremia_od | Integer | 否    | 眼部裂隙灯检查-球结膜充血od;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctival_edema_od     | Integer | 否    | 眼部裂隙灯检查-球结膜水肿od;<br/>0;<br/>1;<br/>2;<br/>3; |
| conjunctival_anomaly_od          | Integer | 否    | 眼部裂隙灯检查-脸板结膜异常od;<br/>0;<br/>1;<br/>2;<br/>3; |
| epithelial_edema_os              | Integer | 否    | 眼部裂隙灯检查-上皮水肿os;<br/>0;<br/>1;<br/>2;<br/>3; |
| micro_capsule_os                 | Integer | 否    | 眼部裂隙灯检查-微囊os;<br/>0;<br/>1;<br/>2;<br/>3; |
| dyed_cornea_os                   | Integer | 否    | 眼部裂隙灯检查-角膜点染os;<br/>0;<br/>1;<br/>2;<br/>3; |
| three_nine_cornea_os             | Integer | 否    | 眼部裂隙灯检查-3、9点染os;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_stroma_os                | Integer | 否    | 眼部裂隙灯检查-角膜基质os;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_neovascularization_os    | Integer | 否    | 眼部裂隙灯检查-角膜新生血管os;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_hyperemia_os             | Integer | 否    | 眼部裂隙灯检查-角膜缘充血os;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctiva_hyperremia_os | Integer | 否    | 眼部裂隙灯检查-球结膜充血os;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctival_edema_os     | Integer | 否    | 眼部裂隙灯检查-球结膜水肿os;<br/>0;<br/>1;<br/>2;<br/>3; |
| conjunctival_anomaly_os          | Integer | 否    | 眼部裂隙灯检查-脸板结膜异常os;<br/>0;<br/>1;<br/>2;<br/>3; |
| slit_lamp_rem                    | String  | 否    | 眼部裂隙灯检查-备注                               |

##### 试戴情况详情

| 参数名                 | 类型     | 必填   | 说明           |
| ------------------- | ------ | ---- | ------------ |
| data_create_doctor  | String | 否    | 数据录入人        |
| glasses_type_od     | String | 否    | 镜片类型OD       |
| glasses_type_os     | String | 否    | 镜片类型OS       |
| glasses_brand_od    | String | 否    | 镜片品牌OD       |
| glasses_brand_os    | String | 否    | 镜片品牌OS       |
| glasses_material_od | String | 否    | 镜片材质OD       |
| glasses_material_os | String | 否    | 镜片材质OS       |
| curve_diameter_od   | String | 否    | 基弧mm/直径OD    |
| curve_diameter_os   | String | 否    | 基弧mm/直径OS    |
| glasses_degrees_od  | String | 否    | 镜片度数OD       |
| glasses_degrees_os  | String | 否    | 镜片度数OS       |
| optometry_od        | String | 否    | 试戴验光OD(戴镜验光) |
| optometry_os        | String | 否    | 试戴验光OS(戴镜验光) |

##### 戴镜前眼部检查详情

| 参数名                    | 类型      | 必填   | 说明                 |
| ---------------------- | ------- | ---- | ------------------ |
| data_create_doctor     | String  | 否    | 数据录入人              |
| bare_vision_od         | String  | 否    | 裸眼视力OD             |
| bare_vision_os         | String  | 否    | 裸眼视力OS             |
| con_pres_od            | String  | 否    | 惯用处方OD             |
| con_pres_os            | String  | 否    | 惯用处方OS             |
| schirmer_od            | String  | 否    | Schirmer试验OD       |
| schirmer_os            | String  | 否    | Schirmer试验OS       |
| data_od_iop            | String  | 否    | OD-眼压              |
| data_os_iop            | String  | 否    | OS-眼压              |
| ct_od                  | String  | 否    | 角膜厚度OD             |
| ct_os                  | String  | 否    | 角膜厚度OS             |
| corneal_sensitivity_od | String  | 否    | 角膜敏感度OD            |
| corneal_sensitivity_os | String  | 否    | 角膜敏感度OS            |
| mirror_drive           | Integer | 否    | 戴镜动机:1-强;2-中等;3-弱; |
| break_up_time_od       | String  | 否    | 泪膜破裂时间OD           |
| break_up_time_os       | String  | 否    | 泪膜破裂时间OS           |
| subjective_od          | String  | 否    | 主觉验光OD             |
| subjective_os          | String  | 否    | 主觉验光OS             |
| corneal_curvature_od   | String  | 否    | 角膜曲率OD             |
| corneal_curvature_os   | String  | 否    | 角膜曲率OS             |
| eyelid_tension         | Integer | 否    | 眼睑张力:1-强;2-中等;3-弱; |
| od_pupil               | String  | 否    | 瞳孔od:常规时默认:PERRL   |
| os_pupil               | String  | 否    | 瞳孔os:常规时默认:PERRL   |
| data_od_axis           | String  | 12   | 否                  |
| data_os_axis           | String  | 12   | 否                  |
| iris_diameter_od       | String  | 否    | 水平可见虹膜直径OD         |
| iris_diameter_os       | String  | 否    | 水平可见虹膜直径OS         |
| corneal_topography_od  | String  | 否    | 角膜地形图OD            |
| corneal_topography_os  | String  | 否    | 角膜地形图OS            |
| corneal_endothelium_od | String  | 否    | 角膜内皮OD             |
| corneal_endothelium_os | String  | 否    | 角膜内皮OS             |
| pupil_diameter_od      | String  | 否    | HVID/瞳孔直径OD        |
| pupil_diameter_os      | String  | 否    | HVID/瞳孔直径OS        |
| pupil_diameter_od      | String  | 否    | HVID/瞳孔直径OD        |
| pupil_diameter_os      | String  | 否    | HVID/瞳孔直径OS        |
| remark                 | String  | 是    | 其他说明               |

#### 接触镜复查(Object)

| 参数名                          | 类型     | 必填   | 说明      |
| ---------------------------- | ------ | ---- | ------- |
| patient_describe             | Object | 是    | 患者陈述    |
| review_optometry             | Object | 是    | 复查验光    |
| eyes_exam_after_glasses      | Object | 是    | 戴镜后复查   |
| fluorescein_image_evaluation | Object | 否    | 荧光素图像评估 |
| eyes_slit_lamp_check         | Object | 是    | 眼部裂隙灯检查 |
| fundus_examination           | Object | 是    | 眼底检查    |
| lens_adaptation              | Object | 否    | 镜片适配    |
| handle                       | String | 否    | 处理      |
| patient_guide                | String | 否    | 患者戴镜指南  |
| next_follow_up_time          | String | 否    | 下次随访时间  |
| new_glasses_precription      | Object | 否    | 新加配镜处方  |

##### 戴镜后复查详情

| 参数名                    | 类型     | 必填   | 说明          |
| ---------------------- | ------ | ---- | ----------- |
| data_create_doctor     | String | 否    | 数据录入人       |
| bare_vision_od         | String | 否    | 裸眼视力OD      |
| bare_vision_os         | String | 否    | 裸眼视力OS      |
| corneal_topography_od  | String | 否    | 角膜地形图OD     |
| corneal_topography_os  | String | 否    | 角膜地形图OS     |
| data_od_iop            | String | 否    | OD-眼压       |
| data_os_iop            | String | 否    | OS-眼压       |
| corneal_endothelium_od | String | 否    | 角膜内皮OD      |
| corneal_endothelium_os | String | 否    | 角膜内皮OS      |
| ct_od                  | String | 否    | 角膜厚度OD      |
| ct_os                  | String | 否    | 角膜厚度OS      |
| subjective_od          | String | 否    | 主觉验光OD      |
| subjective_os          | String | 否    | 主觉验光OS      |
| corneal_curvature_od   | String | 否    | 角膜曲率OD      |
| corneal_curvature_os   | String | 否    | 角膜曲率OS      |
| data_od_axis           | String | 否    | OD-眼轴mm     |
| data_os_axis           | String | 否    | OS-眼轴mm     |
| pupil_diameter_od      | String | 否    | HVID/瞳孔直径OD |
| pupil_diameter_os      | String | 否    | HVID/瞳孔直径OS |
| remark                 | String | 否    | 其他说明        |

##### 新加配镜处方详情

| 参数名                 | 类型     | 必填   | 说明    |
| ------------------- | ------ | ---- | ----- |
| data_create_doctor  | String | 否    | 数据录入人 |
| new_prescription_od | String | 否    | 处方OD  |
| new_prescription_os | String | 否    | 处方OS  |

##### 镜片适配详情

| 参数名                             | 类型      | 必填   | 说明                                       |
| ------------------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor              | String  | 否    | 数据录入人                                    |
| base_arc_od                     | Integer | 否    | 基弧区:<br/>1-小;<br/>2-适中;<br/>3-大;         |
| base_arc_value_od               | Integer | 否    | 基弧区值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| center_contact_od               | Integer | 否    | 中心接触:<br/>1-淡;<br/>2-适中;<br/>3-深;        |
| center_contact_value_od         | Integer | 否    | 中心接触值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| reverse_arc_od                  | Integer | 否    | 反转弧:<br/>1-陡;<br/>2-好;<br/>3-平;          |
| reverse_arc_value_od            | Integer | 否    | 反转弧值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| fixed_arc_od                    | Integer | 否    | 定点弧:<br/>1-陡;<br/>2-好;<br/>3-平;          |
| fixed_arc_value_od              | Integer | 否    | 定点弧值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| blinking_lens_position_od       | Integer | 否    | 眨眼时镜片位置:<br/>1-中心;<br/>2-上;<br/>3-下;<br/>4-偏鼻侧;<br/>5-偏颞侧; |
| blinking_lens_position_value_od | Integer | 否    | 眨眼时镜片位置值:<br/>0-无;<br/>1-↑;<br/>2-↓;     |
| blinked_lens_position_od        | Integer | 否    | 眨眼后镜片位置:<br/>1-中心;<br/>2-上;<br/>3-下;<br/>4-偏鼻侧;<br/>5-偏颞侧; |
| blinked_lens_position_value_od  | Integer | 否    | 眨眼后镜片位置值:<br/>0-无;<br/>1-↑;<br/>2-↓;     |
| peripheral_arcs_od              | Integer | 否    | 周边弧:<br/>1-窄;<br/>2-好;<br/>3-宽;          |
| peripheral_arcs_value_od        | Integer | 否    | 周边弧值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| activity_od                     | Integer | 否    | 活动度:<br/>1-偏大;<br/>2-正常;<br/>3-偏小        |
| activity_value_od               | Integer | 否    | 活动度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| base_arc_os                     | Integer | 否    | 基弧区:<br/>1-小;<br/>2-适中;<br/>3-大;         |
| base_arc_value_os               | Integer | 否    | 基弧区值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| center_contact_os               | Integer | 否    | 中心接触:<br/>1-淡;<br/>2-适中;<br/>3-深;        |
| center_contact_value_os         | Integer | 否    | 中心接触值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| reverse_arc_os                  | Integer | 否    | 反转弧:<br/>1-陡;<br/>2-好;<br/>3-平;          |
| reverse_arc_value_os            | Integer | 否    | 反转弧值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| fixed_arc_os                    | Integer | 否    | 定点弧:<br/>1-陡;<br/>2-好;<br/>3-平;          |
| fixed_arc_value_os              | Integer | 否    | 定点弧值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| blinking_lens_position_os       | Integer | 否    | 眨眼时镜片位置:<br/>1-中心;<br/>2-上;<br/>3-下;<br/>4-偏鼻侧;<br/>5-偏颞侧; |
| blinking_lens_position_value_os | Integer | 否    | 眨眼时镜片位置值:<br/>0-无;<br/>1-↑;<br/>2-↓;     |
| blinked_lens_position_os        | Integer | 否    | 眨眼后镜片位置:<br/>1-中心;<br/>2-上;<br/>3-下;<br/>4-偏鼻侧;<br/>5-偏颞侧; |
| blinked_lens_position_value_os  | Integer | 否    | 眨眼后镜片位置值:<br/>0-无;<br/>1-↑;<br/>2-↓;     |
| peripheral_arcs_os              | Integer | 否    | 周边弧:<br/>1-窄;<br/>2-好;<br/>3-宽;          |
| peripheral_arcs_value_os        | Integer | 否    | 周边弧值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| activity_os                     | Integer | 否    | 活动度:<br/>1-偏大;<br/>2-正常;<br/>3-偏小        |
| activity_value_os               | Integer | 否    | 活动度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |

##### 眼底检查详情

| 参数名                | 类型     | 必填   | 说明                       |
| ------------------ | ------ | ---- | ------------------------ |
| data_create_doctor | String | 否    | 数据录入人                    |
| disk_od            | String | 否    | 眼底检查-视盘od;常规时默认为：透明、无混浊  |
| cd_od              | String | 否    | 眼底检查-C/D od;常规时默认为：0.3   |
| rim_od             | String | 否    | 眼底检查-盘沿od;常规时默认为：粉红色、清   |
| peripheral_od      | String | 否    | 眼底检查-外周od;常规时默认为：清晰      |
| av_od              | String | 否    | 眼底检查-A/V od;常规时默认为：2:3   |
| macular_od         | String | 否    | 眼底检查-黄斑od;常规时默认为：中心凹反光可见 |
| disk_os            | String | 否    | 眼底检查-视盘od;常规时默认为：透明、无混浊  |
| cd_os              | String | 否    | 眼底检查-C/D os;常规时默认为：0.3   |
| rim_os             | String | 否    | 眼底检查-盘沿os;常规时默认为：粉红色、清   |
| peripheral_os      | String | 否    | 眼底检查-外周os;常规时默认为：清晰      |
| av_os              | String | 否    | 眼底检查-A/V os;常规时默认为：2:3   |
| macular_os         | String | 否    | 眼底检查-黄斑os;常规时默认为：中心凹反光可见 |

##### 眼部裂隙灯检查详情

| 参数名                              | 类型      | 必填   | 说明                                       |
| -------------------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor               | String  | 否    | 数据录入人                                    |
| epithelial_edema_od              | Integer | 否    | 眼部裂隙灯检查-上皮水肿od;<br/>0;<br/>1;<br/>2;<br/>3; |
| micro_capsule_od                 | Integer | 否    | 眼部裂隙灯检查-微囊od;<br/>0;<br/>1;<br/>2;<br/>3; |
| dyed_cornea_od                   | Integer | 否    | 眼部裂隙灯检查-角膜点染od;<br/>0;<br/>1;<br/>2;<br/>3; |
| three_nine_cornea_od             | Integer | 否    | 眼部裂隙灯检查-3、9点染od;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_stroma_od                | Integer | 否    | 眼部裂隙灯检查-角膜基质od;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_neovascularization_od    | Integer | 否    | 眼部裂隙灯检查-角膜新生血管od;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_hyperemia_od             | Integer | 否    | 眼部裂隙灯检查-角膜缘充血od;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctiva_hyperremia_od | Integer | 否    | 眼部裂隙灯检查-球结膜充血od;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctival_edema_od     | Integer | 否    | 眼部裂隙灯检查-球结膜水肿od;<br/>0;<br/>1;<br/>2;<br/>3; |
| conjunctival_anomaly_od          | Integer | 否    | 眼部裂隙灯检查-脸板结膜异常od;<br/>0;<br/>1;<br/>2;<br/>3; |
| epithelial_edema_os              | Integer | 否    | 眼部裂隙灯检查-上皮水肿os;<br/>0;<br/>1;<br/>2;<br/>3; |
| micro_capsule_os                 | Integer | 否    | 眼部裂隙灯检查-微囊os;<br/>0;<br/>1;<br/>2;<br/>3; |
| dyed_cornea_os                   | Integer | 否    | 眼部裂隙灯检查-角膜点染os;<br/>0;<br/>1;<br/>2;<br/>3; |
| three_nine_cornea_os             | Integer | 否    | 眼部裂隙灯检查-3、9点染os;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_stroma_os                | Integer | 否    | 眼部裂隙灯检查-角膜基质os;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_neovascularization_os    | Integer | 否    | 眼部裂隙灯检查-角膜新生血管os;<br/>0;<br/>1;<br/>2;<br/>3; |
| corneal_hyperemia_os             | Integer | 否    | 眼部裂隙灯检查-角膜缘充血os;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctiva_hyperremia_os | Integer | 否    | 眼部裂隙灯检查-球结膜充血os;<br/>0;<br/>1;<br/>2;<br/>3; |
| bulbar_conjunctival_edema_os     | Integer | 否    | 眼部裂隙灯检查-球结膜水肿os;<br/>0;<br/>1;<br/>2;<br/>3; |
| conjunctival_anomaly_os          | Integer | 否    | 眼部裂隙灯检查-脸板结膜异常os;<br/>0;<br/>1;<br/>2;<br/>3; |
| slit_lamp_rem                    | String  | 否    | 眼部裂隙灯检查-备注                               |

##### 荧光素图像评估详情

| 参数名                             | 类型      | 必填   | 说明                                       |
| ------------------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor              | String  | 否    | 数据录入人                                    |
| level_central_od                | String  | 否    | 中心定位od:<br/>1-中心;<br/>2-颞侧;<br/>3-鼻侧;<br/>4-上方;<br/>5-下方;<br/>多选时使用逗号分隔 |
| central_value_od                | String  | 否    | 中心定位值:<br/>0-无;<br/>1-↑;<br/>2-↓;<br/>3-←(选中心时有);<br/>4-→(选中心时有);<br/>多选时使用逗号分隔,个数对应中心定位个数 |
| level_central_os                | String  | 否    | 中心定位os:<br/>1-中心;<br/>2-颞侧;<br/>3-鼻侧;<br/>4-上方;<br/>5-下方;<br/>多选时使用逗号分隔 |
| central_value_os                | String  | 否    | 中心定位值:<br/>0-无;<br/>1-↑;<br/>2-↓;<br/>3-←(选中心时有);<br/>4-→(选中心时有);<br/>多选时使用逗号分隔,个数对应中心定位个数 |
| activity_od                     | Integer | 否    | 活动类型od:<br/>1-平滑;<br/>2-快速下滑;<br/>3-顶端旋转; |
| activity_type_od                | Integer | 否    | 活动类型值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| activity_os                     | Integer | 否    | 活动类型os:<br/>1-平滑;<br/>2-快速下滑;<br/>3-顶端旋转; |
| activity_type_os                | Integer | 否    | 活动类型值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| move_degree_od                  | Integer | 否    | 移动度:<br/>1-快;<br/>2-适中;<br/>3-慢;         |
| move_od                         | Integer | 否    | 移动度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| move_degree_os                  | Integer | 否    | 移动度:<br/>1-快;<br/>2-适中;<br/>3-慢;         |
| move_os                         | Integer | 否    | 移动度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| stable_degree_od                | Integer | 否    | 稳定度:<br/>1-是;<br/>2-否;                   |
| stability_od                    | Integer | 否    | 稳定度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| stable_degree_os                | Integer | 否    | 稳定度:<br/>1-是;<br/>2-否;                   |
| stability_os                    | Integer | 否    | 稳定度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| fulores_imaging_od              | Integer | 否    | 中央荧光显像:<br/>1-充盈;<br/>2-均匀;<br/>3-接触;    |
| central_fluorescence_imaging_od | Integer | 否    | 中央荧光显像值:<br/>0-无;<br/>1-↑;<br/>2-↓;      |
| fulores_imaging_os              | Integer | 否    | 中央荧光显像:<br/>1-充盈;<br/>2-均匀;<br/>3-接触;    |
| central_fluorescence_imaging_os | Integer | 否    | 中央荧光显像值:<br/>0-无;<br/>1-↑;<br/>2-↓;      |
| discri_imaging_od               | Integer | 否    | 中周荧光显像:<br/>1-充盈;<br/>2-均匀;<br/>3-接触;    |
| discri_imaging_value_od         | Integer | 否    | 中周荧光显像值:<br/>0-无;<br/>1-↑;<br/>2-↓;      |
| discri_imaging_os               | Integer | 否    | 中周荧光显像:<br/>1-充盈;<br/>2-均匀;<br/>3-接触;    |
| discri_imaging_value_os         | Integer | 否    | 中周荧光显像值:<br/>0-无;<br/>1-↑;<br/>2-↓;      |
| side_arc_width_od               | Integer | 否    | 边弧宽度:<br/>1-宽;<br/>2-适中;<br/>3-窄;        |
| curve_with_od                   | Integer | 否    | 边弧宽度值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| side_arc_width_os               | Integer | 否    | 边弧宽度:<br/>1-宽;<br/>2-适中;<br/>3-窄;        |
| curve_with_os                   | Integer | 否    | 边弧宽度值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| side_arc_tilted_od              | Integer | 否    | 边缘翘起:<br/>1-低;<br/>2-中;<br/>3-高;         |
| curve_raise_od                  | Integer | 否    | 边缘翘起值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| side_arc_tilted_os              | Integer | 否    | 边弧翘起:<br/>1-低;<br/>2-中;<br/>3-高;         |
| curve_raise_os                  | Integer | 否    | 边弧翘起值:<br/>0-无;<br/>1-↑;<br/>2-↓;        |
| coverage_degree_od              | Integer | 否    | 覆盖度:<br/>1-好;<br/>2-差;<br/>3-可接受;        |
| coverage_od                     | Integer | 否    | 覆盖度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| coverage_degree_os              | Integer | 否    | 覆盖度:<br/>1-好;<br/>2-差;<br/>3-可接受;        |
| coverage_os                     | Integer | 否    | 覆盖度值:<br/>0-无;<br/>1-↑;<br/>2-↓;         |
| fit_type_od                     | Integer | 否    | 配适类型od:<br/>1-平坦;<br/>2-匹配;<br/>3-陡峭;    |
| fit_type_value_od               | Integer | 否    | 配适类型od值:<br/>0-无;<br/>1-↑;<br/>2-↓;      |
| fit_type_os                     | Integer | 否    | 配适类型os:<br/>1-平坦;<br/>2-匹配;<br/>3-陡峭;    |
| fit_type_value_os               | Integer | 否    | 配适类型os值:<br/>0-无;<br/>1-↑;<br/>2-↓;      |

##### 复查验光详情

| 参数名                        | 类型     | 必填   | 说明           |
| -------------------------- | ------ | ---- | ------------ |
| data_create_doctor         | String | 否    | 数据录入人        |
| corrected_vision_od_vision | String | 是    | od视力         |
| corrected_vision_os_vision | String | 是    | os视力         |
| optometry_od               | String | 否    | 试戴验光OD(戴镜验光) |
| optometry_os               | String | 否    | 试戴验光OS(戴镜验光) |

##### 患者陈述详情

| 参数名                 | 类型      | 必填   | 说明                                       |
| ------------------- | ------- | ---- | ---------------------------------------- |
| data_create_doctor  | String  | 否    | 数据录入人                                    |
| follow_up_time      | Integer | 是    | 双眼视随访时间选项:<br/>1-一周;<br/>2-1月;<br/>3-3月;<br/>4-6月;<br/>5-12月;<br/>6-不定期; |
| daily_glasses_time  | Integer | 是    | 每日戴镜时间                                   |
| weekly_glasses_time | Integer | 是    | 每周戴镜天数                                   |

#### 诊断与建议(Object)

| 参数名                   | 类型     | 必填   | 说明   |
| --------------------- | ------ | ---- | ---- |
| preliminary_diagnosis | Object | 否    | 初步诊断 |
| handling_suggestion   | Object | 否    | 处理意见 |

##### 处理意见详情

| 参数名                | 类型     | 必填   | 说明     |
| ------------------ | ------ | ---- | ------ |
| data_create_doctor | String | 否    | 数据录入人  |
| suggestion_info    | String | 否    | 处理意见信息 |

##### 初步诊断详情

| 参数名                | 类型     | 必填   | 说明     |
| ------------------ | ------ | ---- | ------ |
| data_create_doctor | String | 否    | 数据录入人  |
| diagnosis_info     | String | 否    | 初步诊断信息 |

## 门诊服务租户建档常用地址获取
**说明：因此业务只是方便用户操作，数据丢失与否不会对对应业务造成影响，所以放在Redis存储。**

```http
[GET]/outemr/patient/archives/common/address
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.7 | 新增   |

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### 回复报文参数(Object)

| 参数名           | 类型     | 必填   | 说明   |
| ------------- | ------ | ---- | ---- |
| pati_province | String | 是    | 省    |
| pati_city     | String | 是    | 市    |
| pati_county   | String | 是    | 区县   |

## 门诊服务租户建档常用地址保存

**说明：因此业务只是方便用户操作，数据丢失与否不会对对应业务造成影响，所以放在Redis存储。**

```http
[POST]/outemr/patient/archives/common/address
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.7 | 新增   |

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### 请求报文参数(Object)

| 参数名           | 类型     | 必填   | 说明   |
| ------------- | ------ | ---- | ---- |
| pati_province | String | 是    | 省    |
| pati_city     | String | 是    | 市    |
| pati_county   | String | 是    | 区县   |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
|      |      |      |      |

## 报告采集-采集上传按钮是否有效

```http
[GET]/outemr/cornea_topog/report/upload/enable
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.7 | 新增   |

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### 请求报文参数

| 参数名         | 类型     | 必填   | 说明                   |
| ----------- | ------ | ---- | -------------------- |
| report_type | String | 是    | 1：角膜地形图;2：角膜内皮镜;3：眼轴 |
#### 回复报文参数

| 参数名    | 类型     | 必填   | 说明        |
| ------ | ------ | ---- | --------- |
| enable | String | 是    | 0：无效；1：有效 |


## 租户病历信息矫正方案列表

```http
[GET]/outemr/clin_reco/emr_treatment/correction_scheme
```

#### 修改更新记录

| 对应业务      | 说明   |
| --------- | ---- |
| WEBV1.3.9 | 新增   |

#### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

#### 回复报文参数(ObjectList)

| 参数名                    | 类型      | 必填   | 说明                                       |
| ---------------------- | ------- | ---- | ---------------------------------------- |
| correction_scheme_id   | Integer | 是    | 矫正方案ID                                   |
| correction_scheme_name | String  | 是    | 矫正方案名称 ，<br/>1-普通单光镜;<br/>2-棱镜;<br/>3-渐进多焦点;<br/>4-近视离焦镜;<br/>5-美德可儿;<br/>6-OK镜;<br/>7-RGP;<br/>8-多焦点软镜; |


## 系统管理客户来源保存或更新

```http
[POST]/sys_service/customer/source/{source_id}
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |

### 影响的表

客户来源表(dic_customer_source)

### 请求报文参数

### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

### PathVariable

| 参数名       | 类型     | 必填   | 说明     |
| --------- | ------ | ---- | ------ |
| source_id | String | 否    | 客户来源ID |

### RequestBody

| 参数名           | 类型      | 必填   | 说明              |
| ------------- | ------- | ---- | --------------- |
| source_name   | String  | 是    | 来源名称            |
| source_enable | Integer | 是    | 来源是否有效 0：停用1：有效 |

### 回复报文参数

| 参数名       | 类型     | 必填   | 说明   |
| --------- | ------ | ---- | ---- |
| source_id | String | 是    | 来源id |

## 系统管理客户来源列表获取

```http
[GET]/sys_service/customer/source/list
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |

### 影响的表

客户来源表(dic_customer_resource)

### 请求报文参数

### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

### RequestBody

| 参数名       | 类型      | 必填   | 说明                       |
| --------- | ------- | ---- | ------------------------ |
| key       | String  | 否    | 关键字                      |
| is_enable | String  | 否    | 是否启用：0:否;1:是;2:全部(默认 ：2) |
| page_size | Integer | 否    | 每页条数 空表示10条              |
| page_num  | Integer | 否    | 第几页 空表示第1页               |

### 回复报文参数Object

| 参数名       | 类型         | 必填   | 说明     |
| --------- | ---------- | ---- | ------ |
| page_num  | Integer    | 是    | 当前页    |
| page_size | Integer    | 是    | 每页的数量  |
| total     | Integer    | 是    | 总记录数   |
| pages     | Integer    | 是    | 总页数    |
| list      | ObjectList | 否    | 客户来源列表 |

客户来源列表说明

| 参数名                | 类型      | 必填   | 说明            |
| ------------------ | ------- | ---- | ------------- |
| source_id          | String  | 是    | 客户来源id        |
| source_name        | String  | 是    | 客户来源名称        |
| source_create_user | String  | 是    | 录入人           |
| source_enable      | Integer | 是    | 是否有效 0：停用1：有效 |

## 推荐人列表获取

```http
[GET]/sys_service/user/info/list
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |


### 请求报文参数

### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

### RequestBody

| 参数名       | 类型      | 必填   | 说明                       |
| --------- | ------- | ---- | ------------------------ |
| key       | String  | 否    | 关键字                      |
| is_enable | String  | 否    | 是否启用：0:否;1:是;2:全部(默认 ：2) |
| page_size | Integer | 否    | 每页条数 空表示10条              |
| page_num  | Integer | 否    | 第几页 空表示第1页               |

### 回复报文参数Object

| 参数名       | 类型         | 必填   | 说明     |
| --------- | ---------- | ---- | ------ |
| page_num  | Integer    | 是    | 当前页    |
| page_size | Integer    | 是    | 每页的数量  |
| total     | Integer    | 是    | 总记录数   |
| pages     | Integer    | 是    | 总页数    |
| list      | ObjectList | 否    | 客户来源列表 |

客户来源列表说明

| 参数名                | 类型      | 必填   | 说明            |
| ------------------ | ------- | ---- | ------------- |
| user_id          | String  | 是    | 用户id        |
| user_name        | String  | 是    | 用户名称        |


## 系统管理客户来源获取

```http
[GET]/sys_service/customer/source/{source_id}
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |

### 影响的表

客户来源表(dic_customer_resource)

### 请求报文参数

### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

### PathVariable

| 参数名       | 类型     | 必填   | 说明     |
| --------- | ------ | ---- | ------ |
| source_id | String | 是    | 客户来源ID |

### 回复报文参数Object
| 参数名                | 类型      | 必填   | 说明            |
| ------------------ | ------- | ---- | ------------- |
| source_id          | String  | 是    | 客户来源id        |
| source_name        | String  | 是    | 客户来源名称        |
| source_create_user | String  | 是    | 录入人           |
| source_enable      | Integer | 是    | 是否有效 0：停用1：有效 |

## 挂号科室列表获取

```http
[GET]/outemr/book/depa/list
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |


### 请求报文参数

| 参数名     | 类型      | 必填   | 说明                  |
| ------- | ------- | ---- | ------------------- |
| is_depa | Integer | 是    | 是否按科室查询：0：否(医生)；1：是 |

### 回复报文参数(ObjectList)

| 参数名          | 类型     | 必填   | 说明     |
| ------------ | ------ | ---- | ------ |
| depa_id      | Long   | 是    | 部门ID   |
| depa_name    | String | 是    | 部门名称   |
| depa_pare_id | Long   | 是    | 上级部门ID |
| depa_book | String   | 是    | 是否支持挂号：0：否；1：是 |

## 常用挂号科室列表保存

说明：所有为方便用户操作的数据存储，如无特殊情况均入Redis
```http
[POST]/outemr/book/common/depa
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |

### 请求报文参数

| 参数名          | 类型         | 必填   | 说明                  |
| ------------ | ---------- | ---- | ------------------- |
| depa_id      | Long   | 是    | 部门ID           |


### 回复报文参数(ObjectList)

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
|      |      |      |      |

## 常用挂号科室列表获取

说明：所有为方便用户操作的数据存储，如无特殊情况均入Redis
```http
[GET]/outemr/book/common/depa
```
### 修改更新记录

| 对应业务        | 说明   |
| ----------- | ---- |
| WEBV1.3.9.3 | 新增   |

### 回复报文参数(Object)

| 参数名          | 类型         | 必填   | 说明              |
| ------------ | ---------- | ---- | --------------- |
| depa_id      | Long   | 是    | 部门ID           |

## 报告采集报告类型常用数据保存
说明：存redis

> [POST]/outemr/user/common/report/collect

###修改更新记录

| 对应版本   | 说明 |
| ---------- | ---- |
| V1.3.9.3.2 | 新增 |

### 请求报文参数(Object)
| 参数名  | 类型     | 必填   | 说明   |
| ---- | ------ | ---- | ---- |
| report_type_id | String   | 是   | 报告类型ID     |
| report_type_name | String | 是   | 报告类型名称   |
| report_time    | String | 是   | 报告类型报告日期：yyyy-MM-dd   |
### 回复报文参数

| 参数名       | 类型   | 必填 | 说明       |
| ------------ | ------ | ---- | ---------- |
|       |    | |      |

## 报告采集报告类型常用数据获取

说明：存redis
> [GET]/outemr/user/common/report/collect

###修改更新记录

| 对应版本 | 说明 |
| -------- | ---- |
| V1.3.9.5 | 新增 |

### 回复报文参数(Object)
| 参数名  | 类型     | 必填   | 说明   |
| ---- | ------ | ---- | ---- |
| report_type_id | String   | 是   | 报告类型ID     |
| report_type_name | String | 是   | 报告类型名称   |
| report_time    | String | 是   | 报告类型报告日期：yyyy-MM-dd   |

## 挂号科室树状图科室列表获取（挂号用）

> [GET]/outemr/book/depa/info/list

### 请求报文参数

| 参数名       | 类型      | 必填   | 说明                         |
| --------- | ------- | ---- | -------------------------- |
| depa_id       | String  | 是    | 科室ID |
| page_size | Integer | 否    | 每页条数 空表示10条                |
| page_num  | Integer | 否    | 第几页 空表示第1页                 |

### 回复报文参数

| 参数名       | 类型         | 必填   | 说明          |
| --------- | ---------- | ---- | ----------- |
| page_size | Integer    | 是    | 每页条数 空表示10条 |
| page_num  | Integer    | 是    | 第几页 空表示第1页  |
| total     | Integer    | 是    | 总记录数        |
| pages     | Integer    | 是    | 总页数         |
| list      | ObjectList | 否    | 科室列表        |

科室列表说明

| 参数名       | 类型     | 必填   | 说明   |
| --------- | ------ | ---- | ---- |
| depa_id   | String | 是    | 科室id |
| depa_name | String | 是    | 科室名称 |


## 租户设备对接是否绑定获取

> [GET]/outemr/equipment/docking/bingding

说明：
1. 判断租户是否已进行设备对接
2. 涉及表：医院设备型号表（api_device_model）
### 请求报文参数

#### RequestHeader

| 参数名                 | 类型   | 必填   | 说明                 |
| ------------------- | ---- | ---- | ------------------ |
| Env.HEAD_TENANT_KEY | Long | 是    | 租户ID，实现值是：tenantId |

### 回复报文参数

| 参数名       | 类型         | 必填   | 说明          |
| --------- | ---------- | ---- | ----------- |
| is_binding | Integer    | 是    |是否绑定：0：否；1：是  |

## 设备检查数据获取

> [GET]/outemr/equipment/examine/data

说明：
1. 根据app_web_code，取对应数据类型表中当前服务器时间后三分钟内最新的一条数据
2. 涉及表
2.1 设备电脑验光数据表(device_computer_optometry)
2.2 设备眼压眼轴数据表(device_iop_data)
2.3 设备主觉验光数据表(device_subjective_data)
2.3 设备瞳距瞳高数据表(device_opto_data)

### 请求报文参数

| 参数名    | 类型    | 必填 | 说明                                                         |
| --------- | ------- | ---- | ------------------------------------------------------------ |
| data_type | Integer | 是   | 数据类型：1:电脑验光；2：主觉验光；3：眼压/眼轴；4：瞳距/瞳高；5：近附加 |
| app_web_code | String    | 是   | app_web_code(设备服务提供的唯一标识)                                 |
| patient_id | String    | 否  | 患者ID                                |
| data_time | String    | 否  | 查询时间(yyyy-MM-dd HH：mm:ss)    |

### 回复报文参数

| 参数名 | 类型    | 必填 | 说明                   |
| ------ | ------- | ---- | ---------------------- |
|    computer_optometry_data    | Object | 否   | 电脑验光 |
|    subjective_optometry_data    | Object | 否   | 主觉验光 |
|    presbyopicadd_data    | String | 否   | 近附加 |
|    pd_ph_data    | Object | 否   | 瞳距/瞳高 |
|    iop_axis_data    | Object | 否   | 眼压/眼轴 |

#### 眼压/眼轴

| 参数名 | 类型    | 必填 | 说明                   |
| ------ | ------- | ---- | ---------------------- |
| data_od_iop  | String | 否   | OD-眼压,mmgh |
| data_os_iop  | String | 否   | OS-眼压,mmgh |
| data_od_iop_axis | String |  否   | OD-眼轴,mm   |
| data_os_iop_axis | String |  否   | OD-眼轴,mm   |

#### 瞳距/瞳高

| 参数名 | 类型    | 必填 | 说明                   |
| ------ | ------- | ---- | ---------------------- |
| opto_far_pd           | Integer | 否    | 瞳距-远用     |
| opto_near_pd          | Integer | 否    | 瞳距-近用     |
| opto_od_pd            | Integer | 否    | 瞳距-单眼OD   |
| opto_os_pd            | Integer | 否    | 瞳距-单眼OS   |
| opto_pd_rem            | String | 否    | 瞳距-备注   |
| opto_od_ph            | Integer | 否    | 瞳高-OD     |
| opto_os_ph            | Integer | 否    | 瞳高-OS     |


#### 主觉验光

| 参数名 | 类型    | 必填 | 说明                   |
| ------ | ------- | ---- | ---------------------- |
| subjective_od_sphere                | Double | 否    | 主觉验光OD-球镜    |
| subjective_od_cylinder              | Double | 否    | 主觉验光OD-柱镜    |
| subjective_od_axis                  | Double | 否    | 主觉验光OD-轴向    |
| subjective_od_prism                 | Double | 否    | 主觉验光OD-棱镜    |
| subjective_od_vision                | Double | 否    | 主觉验光OD-视力    |
| subjective_od_memo                  | String | 否    | 主觉验光OD-备注    |
| subjective_os_sphere                | Double | 否    | 主觉验光OS-球镜    |
| subjective_os_cylinder              | Double | 否    | 主觉验光OS-柱镜    |
| subjective_os_axis                  | Double | 否    | 主觉验光OS-轴向    |
| subjective_od_prism                 | Double | 否    | 主觉验光OS-棱镜    |
| subjective_os_vision                | Double | 否    | 主觉验光OS-视力    |
| subjective_os_memo                  | String | 否    | 主觉验光OS-备注    |

#### 电脑验光
| 参数名 | 类型    | 必填 | 说明                   |
| ------ | ------- | ---- | ---------------------- |
| data_od_sphere   | String | 否   | 电脑验光球镜od |
| data_od_cylinder | String | 否   | 电脑验光柱镜od |
| data_od_axis     | String | 否   | 电脑验光轴向od |
| data_od_rem      | String | 否   | 电脑验光OD备注 |
| data_os_sphere   | String | 否   | 电脑验光球镜os |
| data_os_cylinder | String | 否   | 电脑验光柱镜os |
| data_os_axis     | String | 否   | 电脑验光轴向os |
| data_os_rem      | String | 否   | 电脑验光OS备注 |

##诊断情况（微信用）


### 患者就诊列表

```http
[GET]/outemr/wechat/trea_list
```
#### 修改更新记录

| 对应业务   | 说明            |
| ------ | ------------- |
| V1.3.6 | 新增  微信端增加门诊病历 |


#### 请求报文参数

| 参数名       | 类型      | 必填   | 说明   |
| --------- | ------- | ---- | ---- |
| pati_id   | String  | 是    | 患者id |
| page_size | Integer | 是    | 每页条数 |
| page_num  | Integer | 是    | 当前页  |

#### 回复报文参数ObjectList

| 参数名       | 类型         | 必填   | 说明    |
| --------- | ---------- | ---- | ----- |
| page_num  | Integer    | 是    | 当前页   |
| page_size | Integer    | 是    | 每页的数量 |
| list      | ObjectList | 否    | 就诊列表  |

就诊列表说明

| 参数名          | 类型     | 必填   | 说明   |
| ------------ | ------ | ---- | ---- |
| trea_id      | String | 是    | 就诊ID |
| trea_time    | String | 是    | 接诊时间 |
| depa_name    | String | 是    | 就诊科室 |
| doctor_name  | String | 是    | 接诊医生 |
| diag_content | String | 是    | 诊断内容 |


### 患者就诊详情

```http
[GET]/outemr/wechat/trea_detail
```


#### 修改更新记录

| 对应业务   | 说明            |
| ------ | ------------- |
| V1.3.6 | 新增  微信端增加门诊病历 |


#### 请求报文参数

| 参数名     | 类型     | 必填   | 说明   |
| ------- | ------ | ---- | ---- |
| trea_id | String | 是    | 就诊ID |


#### 回复报文参数

| 参数名              | 类型     | 必填   | 说明   |
| ---------------- | ------ | ---- | ---- |
| trea_id          | String | 是    | 就诊ID |
| trea_time        | String | 是    | 接诊时间 |
| depa_name        | String | 是    | 就诊科室 |
| doctor_name      | String | 是    | 接诊医生 |
| comp_content     | String | 否    | 主诉内容 |
| illn_content     | String | 否    | 否    |
| his_illn_content | String | 否    | 疾病史  |
| specialist_check | String | 否    | 否    |
| diag_content     | String | 是    | 诊断内容 |
| trea_suggestion  | String | 否    | 否    |





##支付（微信用）

患者点击

### 预约去支付

```http
[GET]/outemr/wechat/pay_appoint
```
根据预约id生成挂号信息
根据挂号id,调”收费服务“的接口

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.6 | 新增   |


#### 请求报文参数

| 参数名        | 类型     | 必填   | 说明   |
| ---------- | ------ | ---- | ---- |
| appoint_id | String | 是    | 预约id |


#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |




##预约情况（APP用）


### 我的预约列表

```http
[GET]/outemr/app/appoint_list
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.6 | 新增   |


#### 请求报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |


#### 回复报文参数ObjectList

| 参数名                   | 类型      | 必填   | 说明     |
| --------------------- | ------- | ---- | ------ |
| schedule_date         | String  | 是    | 排班日期   |
| schedule_week         | String  | 是    | 星期几    |
| total_num             | Integer | 是    | 可约总数   |
| appointed_num         | Integer | 是    | 已约总数   |
| morning_schedule_id   | String  | 是    | 上午班次id |
| morning_fee           | Double  | 是    | 上午费用   |
| morning_num           | Integer | 是    | 上午已约数  |
| afternoon_schedule_id | String  | 是    | 下午班次id |
| afternoon_fee         | Double  | 是    | 下午费用   |
| afternoon_num         | Integer | 是    | 下午已约数  |
| night_schedule_id     | String  | 是    | 晚上班次id |
| night_fee             | Double  | 是    | 晚上费用   |
| night_num             | Integer | 是    | 晚上已约数  |


### 预约病人列表

```http
[GET]/outemr/app/appoint_patient_list
```

#### 修改更新记录

| 对应业务   | 说明   |
| ------ | ---- |
| V1.3.6 | 新增   |


#### 请求报文参数

| 参数名         | 类型     | 必填   | 说明     |
| ----------- | ------ | ---- | ------ |
| schedule_id | String | 是    | 下午班次id |

#### 回复报文参数ObjectList

| 参数名           | 类型      | 必填   | 说明                |
| ------------- | ------- | ---- | ----------------- |
| pati_name     | String  | 是    | 病人姓名              |
| pati_gender   | String  | 是    | 病人性别 0 未知 1男  2 女 |
| age           | String  | 是    | 年龄                |
| phone         | String  | 是    | 手机号码              |
| id_number     | String  | 是    | 身份证号              |
| appo_code     | Integer | 是    | 预约号               |
| depa_name     | String  | 是    | 预约科室              |
| outp_type     | String  | 是    | 门诊类型              |
| trea_date     | String  | 是    | 就诊日期              |
| visi_serialno | String  | 是    | 就诊序号 不带“号”        |
| book_fee      | Double  | 是    | 挂号费               |

##web端预约处理


### 根据患者姓名和手机号获取患者列表信息

```http
[GET]/outemr/book_service/patients
```

####修改更新记录

| 对应版本   | 说明             |
| ------ | -------------- |
| V1.3.6 | 新增  按照建档日期倒序排列 |

#### 请求报文参数

| 参数名   | 类型     | 必填   | 说明   |
| ----- | ------ | ---- | ---- |
| name  | String | 是    | 姓名   |
| phone | String | 是    | 手机号  |

#### 回复报文参数

| 参数名            | 类型     | 必填   | 说明     |
| -------------- | ------ | ---- | ------ |
| pati_id        | String | 是    | 患者ID   |
| pati_name      | String | 是    | 患者姓名   |
| pati_phone     | String | 是    | 患者手机号  |
| create_time    | String | 是    | 建档日期   |
| pati_id_number | String | 是    | 患者身份证号 |
### 根据患者就诊人认证

```http
[POST]/outemr/book_service/patients/relevance
```

>更新tre_outp_bookappo中患者ID
>同时更新com_tena_patirelated绑定时间和绑定标志

####修改更新记录

| 对应版本   | 说明               |
| ------ | ---------------- |
| V1.3.6 | 新增  患者就诊人和患者信息关联 |

#### 请求报文参数

| 参数名     | 类型     | 必填   | 说明      |
| ------- | ------ | ---- | ------- |
| rela_id | String | 是    | 患者就诊人ID |
| pati_id | String | 是    | 患者ID    |

#### 回复报文参数

| 参数名  | 类型   | 必填   | 说明   |
| ---- | ---- | ---- | ---- |
| 无    |      |      |      |


### 预约挂号

> [POST]/outemr/book_service/book/bookappo

####修改说明

| 对应版本   | 说明                        |
| ------ | ------------------------- |
| V1.3.6 | 实现修改 发送微信消息格式修改(预约挂号成功通知) |

#### 请求报文参数

| 参数名         | 类型      | 必填   | 说明                     |
| ----------- | ------- | ---- | ---------------------- |
| appo_id     | String  | 是    | 预约id                   |
| schedule_id | String  | 是    | 排班ID                   |
| serial_no   | Integer | 是    | 就诊编号，例如"10号 10:00"就传10 |

#### 回复报文参数

| 参数名     | 类型     | 必填   | 说明             |
| ------- | ------ | ---- | -------------- |
| book_id | String | 是    | 预约挂号成功后，返回预约ID |

