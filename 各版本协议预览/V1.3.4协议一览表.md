# V1.3.4协议一览表

## 收费系统协议.md

所在位置： seeing\wiki\协议文档

| 协议地址                                              | 协议名称                  | 说明 | 人员   |
| ------------------------------------------------- | ------------------------- | ---- | ------ |
| [GET]/charge_order_service/examination_package/list      | 检查套餐费列表 |      | 何志雄 |
| [GET]/charge_order_service/examination_package/{package_id}      | 检查套餐获取 |      | 何志雄 |
| [POST]/charge_order_service/examination_package/{package_id}      | 检查套餐新增/修改 |      | 何志雄 |
| [DELETE]/charge_order_service/examination_package/{package_id}      | 检查套餐删除 |      | 何志雄 |
| [GET]/charge_order_service/examination_package/fee_options      |  检查费/其他费列表 |      | 何志雄 |
| [POST]/charge_order_service/examination/trade_submit      |  根据检查处方生成收费订单 |      | 何志雄 |
| [POST]/charge_order_service/examination/trade_refund      |  根据检查处方生成退费订单 |      | 何志雄 |
| [POST]/charge_order_service/examination/trade_cancel      |  根据检查处方生成取消收费订单 |      | 何志雄 |



## 门诊电子病历协议.md

所在位置： seeing\wiki\协议文档

| 协议地址                                              | 协议名称                  | 说明 | 人员   |
| ----------------------------------------------------- | ------------------------- | ---- | ------ |
| 以下是门诊检查处方      |  |      |  |
| [GET]/outemr/examination/list      |  门诊检查处方列表获取 |      | 潘本乐 |
| [POST]/outemr/examination/submit      |   门诊检查处方提交申请 |      | 潘本乐 |
| [POST]/outemr/examination/refund_submit      |  门诊检查处方退费申请 |      | 潘本乐 |
| [GET]/outemr/examination/pacakge_options      |  检查套餐选项列表 |      | 潘本乐 |
| [GET]/outemr/examination_package/{package_id}      |  检查套餐详情 |      | 潘本乐 |
| 以下是医生个人检查套餐      |  |      |  |
| [GET]/outemr/personal/examination_package/list     |  个人检查套餐列表 |      | 潘本乐 |
| [GET]/outemr/personal/examination_package/{package_id}      |  个人检查套餐详情 |      | 潘本乐 |
| [POST]/outemr/personal/examination_package/{package_id}     |  个人检查套餐新增/修改 |      | 潘本乐 |
| [DELETE]/outemr/personal/examination_package/{package_id}     |  个人检查套餐删除 |      | 潘本乐 |
| [GET]/outemr/personal/examination_package/fee_options     |  检查费/其他费列表|      | 潘本乐 |
| [GET]/outemr/emr/examination_list     |   检查处方记录列表|      | 潘本乐 |




## 报表服务协议.md

所在位置： seeing\wiki\协议文档

| 协议地址                                                     | 协议名称               | 说明                         | 人员   |
| ------------------------------------------------------------ | ---------------------- | ---------------------------- | ------ |
|                 |          |                              |  | 

## 门诊收费协议规范设计.md

所在位置： seeing\wiki\协议文档\原web协议

| 协议地址                          | 协议名称                 | 说明                         | 人员 |
| --------------------------------- | ------------------ | --------- | ---- |
| [GET]/charge_service/common/wb_code                              | 五笔码获取               |                | 何志雄 |
| [GET]/charge_service/examination/{fee_id}                              | 检查费获取               |                | 何志雄 |
| [POST]/charge_service/examination                              | 检查费新增/修改               |                | 何志雄 |
| [GET]/jasreport_service/charge/today_payed/print/pdf                              |  当天已收费订单打印               |                | 虞鑫杰 |
| [GET]/jasreport_service/charge/today_refund/print/pdf                              |  当天已退费订单打印               |                | 虞鑫杰 |
|[GET]/charge_service/to_refund                              | 待退费订单详情               |                | 何志雄 |
|[GET]/charge_service/today_refund                              | 当天已退费订单详情               |                | 何志雄 |
|[GET]/charge_service/today_payed                              | 当天已收费订单详情               |                | 何志雄 |
|[GET]/charge_service/statistics/particulars_list                              | 收费明细列表               |                | 何志雄 |
|[GET]/jasreport_service/statistics/particulars_list/excel                              | 收费明细列表导出               |                | 虞鑫杰 |
|[GET]/charge_service/statistics/particulars/pay_detail                              |  收/退费详细               |                | 何志雄 |
|[GET]/charge_service/statistics/item                              |  收费项目统计               |                | 何志雄 |
|[GET]/jasreport_service/statistics/item/excel                              |  收费项目统计导出               |                | 虞鑫杰 |
|[GET]/charge_service/statistics/class                              |  收费类别统计               |                | 何志雄 |
|[GET]/jasreport_service/statistics/class/excel                              | 收费类别统计导出               |                | 虞鑫杰 |



## 系统管理协议接口.md

所在位置： seeing\wiki\协议文档\原web协议

| 协议地址                                      | 协议名称                        | 说明 | 人员   |
| --------------------------------------------- | ------------------------------- | ---- | ------ |
| [POST]/template_data/initialize/pre_upload    | 模板数据预上传                  |      | 贺志强 |
| [POST]/template_data/initialize/upload_access | 模板数据上传 确认已上传(发消息) |      | 贺志强 |
| [GET]/template_data/initialize/import/record  | 模板数据导入记录                |      | 贺志强 |
| [GET]/template_data/config/list                    | 获取配置                        |      | 王斌   |
| [POST]/template_data/config                   | 更新租户配置                    |      | 王斌   |

1-患者信息文件; https://bestseeing-public.oss-cn-shanghai-finance-1-pub.aliyuncs.com/initialize_template%2F%E6%82%A3%E8%80%85%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%85%A5%E8%A7%84%E8%8C%83.xlsx
2-药品目录文件; https://bestseeing-public.oss-cn-shanghai-finance-1-pub.aliyuncs.com/initialize_template/%E8%8D%AF%E5%93%81%E7%9B%AE%E5%BD%95%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx
3-药品库存文件; https://bestseeing-public.oss-cn-shanghai-finance-1-pub.aliyuncs.com/initialize_template/%E8%8D%AF%E5%93%81%E5%BA%93%E5%AD%98%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx
4-商品目录文件; https://bestseeing-public.oss-cn-shanghai-finance-1-pub.aliyuncs.com/initialize_template/%E5%95%86%E5%93%81%E7%9B%AE%E5%BD%95%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx
5-商品库存文件; https://bestseeing-public.oss-cn-shanghai-finance-1-pub.aliyuncs.com/initialize_template/%E5%95%86%E5%93%81%E5%BA%93%E5%AD%98%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx


### 患者服务

#### 患者信息文件分析

队列名称: PATI_INITIALIZE_DATA_IMPT     RedisDB: 13

| 对应版本 | 说明              |
| -------- | ----------------- |
| V1.3.4   | 新增  |

消息队列的内容是:

| 参数名  | 类型   | 必填 | 说明       |
| ------- | ------ | ---- | ---------- |
| impt_id | String | 是   | 导入记录ID |

监听消息，根据接受的内容将上传的文件进行解析，将患者信息导入租户患者基本信息表。

患者信息导入成功后，发送消息将患者数据同步更新至ES中，可参考public项目中的发消息机制。

成功的数据成为新的名为“患者信息导入成功.xls”的EXCEL文件，失败的数据写入新的名为”患者信息导入失败.xls“的EXCEL文件。

分析完成将解析结果保存到表tena_initialize_import中。





### 药品服务

药品目录文件     队列名称: DRUG_DIRECTORY_DATA_IMPT     RedisDB: 2

药品库存文件     队列名称: DRUG_STOCK_DATA_IMPT     RedisDB: 2

| 对应版本 | 说明              |
| -------- | ----------------- |
| V1.3.4   | 新增  |


消息队列的内容是:

| 参数名  | 类型   | 必填 | 说明       |
| ------- | ------ | ---- | ---------- |
| impt_id | String | 是   | 导入记录ID |

监听消息，根据接受的内容将上传的文件进行解析，将药品信息导入对应的数据表中，药品信息表，单位表，库存表等相关表。

药品目录文件成功的数据成为新的名为“药品目录导入成功.xls”的EXCEL文件，失败的数据写入新的名为”药品目录导入失败.xls“的EXCEL文件。

药品库存文件成功的数据成为新的名为“药品信息导入成功.xls”的EXCEL文件，失败的数据写入新的名为”药品信息导入失败.xls“的EXCEL文件。



分析完成将解析结果保存到表tena_initialize_import中。



### ERP服务


商品目录文件     队列名称: ERP_GOODS_DIRECTORY_IMPT     RedisDB: 10

商品库存文件     队列名称: ERP_GOODS_STOCK_IMPT     RedisDB: 10

| 对应版本 | 说明              |
| -------- | ----------------- |
| V1.3.4   | 新增  |

消息队列的内容是:

| 参数名  | 类型   | 必填 | 说明       |
| ------- | ------ | ---- | ---------- |
| impt_id | String | 是   | 导入记录ID |

监听消息，根据接受的内容将上传的文件进行解析，将商品信息和商品目录导入商品表、品种表、品牌表、生产厂家等相关表

商品目录文件成功的数据成为新的名为“商品目录导入成功.xls”的EXCEL文件，失败的数据写入新的名为”商品目录导入失败.xls“的EXCEL文件。

商品库存文件成功的数据成为新的名为“商品库存导入成功.xls”的EXCEL文件，失败的数据写入新的名为”商品库存导入失败.xls“的EXCEL文件。

分析完成将解析结果保存到表tena_initialize_import中。





